import{_ as s,c as n,o as a,a as l}from"./app.368cfe21.js";const C=JSON.parse('{"title":"MybatisPlus从入门到精通-基础篇","description":"","frontmatter":{},"headers":[{"level":2,"title":"1.概述","slug":"_1-概述","link":"#_1-概述","children":[]},{"level":2,"title":"2.快速入门","slug":"_2-快速入门","link":"#_2-快速入门","children":[{"level":3,"title":"2.0 准备工作","slug":"_2-0-准备工作","link":"#_2-0-准备工作","children":[]},{"level":3,"title":"2.1 使用MybatisPlus","slug":"_2-1-使用mybatisplus","link":"#_2-1-使用mybatisplus","children":[]}]},{"level":2,"title":"3.常用设置","slug":"_3-常用设置","link":"#_3-常用设置","children":[{"level":3,"title":"3.1 设置表映射规则","slug":"_3-1-设置表映射规则","link":"#_3-1-设置表映射规则","children":[]},{"level":3,"title":"3.2 设置主键生成策略","slug":"_3-2-设置主键生成策略","link":"#_3-2-设置主键生成策略","children":[]},{"level":3,"title":"3.3 设置字段映射关系","slug":"_3-3-设置字段映射关系","link":"#_3-3-设置字段映射关系","children":[]},{"level":3,"title":"3.4 设置字段和列名的驼峰映射","slug":"_3-4-设置字段和列名的驼峰映射","link":"#_3-4-设置字段和列名的驼峰映射","children":[]},{"level":3,"title":"3.5 日志","slug":"_3-5-日志","link":"#_3-5-日志","children":[]}]},{"level":2,"title":"4.基本使用","slug":"_4-基本使用","link":"#_4-基本使用","children":[{"level":3,"title":"4.1 插入数据","slug":"_4-1-插入数据","link":"#_4-1-插入数据","children":[]},{"level":3,"title":"4.2 删除操作","slug":"_4-2-删除操作","link":"#_4-2-删除操作","children":[]},{"level":3,"title":"4.3 更新操作","slug":"_4-3-更新操作","link":"#_4-3-更新操作","children":[]}]},{"level":2,"title":"5.条件构造器Wrapper","slug":"_5-条件构造器wrapper","link":"#_5-条件构造器wrapper","children":[{"level":3,"title":"5.1 概述","slug":"_5-1-概述","link":"#_5-1-概述","children":[]},{"level":3,"title":"5.2 常用AbstractWrapper方法","slug":"_5-2-常用abstractwrapper方法","link":"#_5-2-常用abstractwrapper方法","children":[]},{"level":3,"title":"5.3 常用QueryWrapper方法","slug":"_5-3-常用querywrapper方法","link":"#_5-3-常用querywrapper方法","children":[]},{"level":3,"title":"5.4 常用的UpdateWrapper方法","slug":"_5-4-常用的updatewrapper方法","link":"#_5-4-常用的updatewrapper方法","children":[]},{"level":3,"title":"5.5 Lambda条件构造器","slug":"_5-5-lambda条件构造器","link":"#_5-5-lambda条件构造器","children":[]}]},{"level":2,"title":"6.自定义SQL","slug":"_6-自定义sql","link":"#_6-自定义sql","children":[{"level":3,"title":"6.0 准备工作","slug":"_6-0-准备工作","link":"#_6-0-准备工作","children":[]},{"level":3,"title":"6.1 Mybatis方式","slug":"_6-1-mybatis方式","link":"#_6-1-mybatis方式","children":[]},{"level":3,"title":"6.2 Mybatis方式结合条件构造器","slug":"_6-2-mybatis方式结合条件构造器","link":"#_6-2-mybatis方式结合条件构造器","children":[]}]},{"level":2,"title":"7.分页查询","slug":"_7-分页查询","link":"#_7-分页查询","children":[{"level":3,"title":"7.1 基本分页查询","slug":"_7-1-基本分页查询","link":"#_7-1-基本分页查询","children":[]},{"level":3,"title":"7.2 多表分页查询","slug":"_7-2-多表分页查询","link":"#_7-2-多表分页查询","children":[]}]},{"level":2,"title":"8.Service 层接口","slug":"_8-service-层接口","link":"#_8-service-层接口","children":[{"level":3,"title":"8.1 基本使用","slug":"_8-1-基本使用","link":"#_8-1-基本使用","children":[]},{"level":3,"title":"8.2自定义方法","slug":"_8-2自定义方法","link":"#_8-2自定义方法","children":[]}]},{"level":2,"title":"9.代码生成器","slug":"_9-代码生成器","link":"#_9-代码生成器","children":[{"level":3,"title":"①添加依赖","slug":"_1添加依赖-1","link":"#_1添加依赖-1","children":[]},{"level":3,"title":"②生成","slug":"_2生成","link":"#_2生成","children":[]}]},{"level":2,"title":"1.自动填充","slug":"_1-自动填充","link":"#_1-自动填充","children":[{"level":3,"title":"示例","slug":"示例-3","link":"#示例-3","children":[]}]},{"level":2,"title":"2.逻辑删除","slug":"_2-逻辑删除","link":"#_2-逻辑删除","children":[]},{"level":2,"title":"3.乐观锁","slug":"_3-乐观锁","link":"#_3-乐观锁","children":[{"level":3,"title":"3.1 使用","slug":"_3-1-使用","link":"#_3-1-使用","children":[]},{"level":3,"title":"3.2 多插件配置问题","slug":"_3-2-多插件配置问题","link":"#_3-2-多插件配置问题","children":[]}]}],"relativePath":"java/spring/MybatisPlus.md","lastUpdated":1673189112000}'),p={name:"java/spring/MybatisPlus.md"},e=l(`<h1 id="mybatisplus从入门到精通-基础篇" tabindex="-1">MybatisPlus从入门到精通-基础篇 <a class="header-anchor" href="#mybatisplus从入门到精通-基础篇" aria-hidden="true">#</a></h1><h2 id="_1-概述" tabindex="-1">1.概述 <a class="header-anchor" href="#_1-概述" aria-hidden="true">#</a></h2><p>​ MybatisPlus是一款Mybatis增强工具，用于简化开发，提高效率。 它在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。</p><p>​ 官网： <a href="https://mp.baomidou.com/" target="_blank" rel="noreferrer">https://mp.baomidou.com/</a></p><h2 id="_2-快速入门" tabindex="-1">2.快速入门 <a class="header-anchor" href="#_2-快速入门" aria-hidden="true">#</a></h2><h3 id="_2-0-准备工作" tabindex="-1">2.0 准备工作 <a class="header-anchor" href="#_2-0-准备工作" aria-hidden="true">#</a></h3><h4 id="_1准备数据" tabindex="-1">①准备数据 <a class="header-anchor" href="#_1准备数据" aria-hidden="true">#</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">CREATE</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">TABLE</span><span style="color:#C9D1D9;"> \`</span><span style="color:#D2A8FF;">user</span><span style="color:#C9D1D9;">\` (</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`id\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">bigint</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">20</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">NOT NULL</span><span style="color:#C9D1D9;"> AUTO_INCREMENT COMMENT </span><span style="color:#A5D6FF;">&#39;id&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`user_name\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">varchar</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">20</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">NOT NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;用户名&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`password\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">varchar</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">20</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">NOT NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;密码&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`name\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">varchar</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">30</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;姓名&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`age\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">11</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;年龄&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`address\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">varchar</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">100</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;地址&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">PRIMARY KEY</span><span style="color:#C9D1D9;"> (</span><span style="color:#A5D6FF;">\`id\`</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">) ENGINE</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">InnoDB AUTO_INCREMENT</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">5</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> CHARSET</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">insert  into</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">\`user\`</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">\`id\`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">\`user_name\`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">\`password\`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">\`name\`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">\`age\`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">\`address\`</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">values</span><span style="color:#C9D1D9;"> (</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;ruiwen&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;123&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;瑞文&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">12</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;山东&#39;</span><span style="color:#C9D1D9;">),(</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;gailun&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;1332&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;盖伦&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">13</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;平顶山&#39;</span><span style="color:#C9D1D9;">),(</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;timu&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;123&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;提姆&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">22</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;蘑菇石&#39;</span><span style="color:#C9D1D9;">),(</span><span style="color:#79C0FF;">4</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;daji&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;1222&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;妲己&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">221</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;狐山&#39;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_2创建springboot工程" tabindex="-1">②创建SpringBoot工程 <a class="header-anchor" href="#_2创建springboot工程" aria-hidden="true">#</a></h4><h5 id="添加依赖" tabindex="-1">添加依赖 <a class="header-anchor" href="#添加依赖" aria-hidden="true">#</a></h5><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">parent</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;org.springframework.boot&lt;/</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;spring-boot-starter-parent&lt;/</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">&gt;2.5.0&lt;/</span><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">parent</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">dependencies</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;org.springframework.boot&lt;/</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;spring-boot-starter-web&lt;/</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;org.projectlombok&lt;/</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;lombok&lt;/</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">optional</span><span style="color:#C9D1D9;">&gt;true&lt;/</span><span style="color:#7EE787;">optional</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;org.springframework.boot&lt;/</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;spring-boot-starter-test&lt;/</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">scope</span><span style="color:#C9D1D9;">&gt;test&lt;/</span><span style="color:#7EE787;">scope</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">dependencies</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h5 id="创建启动类" tabindex="-1">创建启动类 <a class="header-anchor" href="#创建启动类" aria-hidden="true">#</a></h5><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">SpringBootApplication</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">SGApplication</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">static</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">main</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">String</span><span style="color:#C9D1D9;">[] </span><span style="color:#FFA657;">args</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        SpringApplication.</span><span style="color:#D2A8FF;">run</span><span style="color:#C9D1D9;">(SGApplication.class);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_3准备实体类" tabindex="-1">③准备实体类 <a class="header-anchor" href="#_3准备实体类" aria-hidden="true">#</a></h4><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Data</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">NoArgsConstructor</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">AllArgsConstructor</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">User</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Long</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">id;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">userName;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">password;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">name;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Integer</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">age;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">address;</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_2-1-使用mybatisplus" tabindex="-1">2.1 使用MybatisPlus <a class="header-anchor" href="#_2-1-使用mybatisplus" aria-hidden="true">#</a></h3><h4 id="_1添加依赖" tabindex="-1">①添加依赖 <a class="header-anchor" href="#_1添加依赖" aria-hidden="true">#</a></h4><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;com.baomidou&lt;/</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;mybatis-plus-boot-starter&lt;/</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">&gt;3.4.3&lt;/</span><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;mysql&lt;/</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;mysql-connector-java&lt;/</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_2配置数据库信息" tabindex="-1">②配置数据库信息 <a class="header-anchor" href="#_2配置数据库信息" aria-hidden="true">#</a></h4><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#7EE787;">spring</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">datasource</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">url</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">jdbc:mysql://localhost:3306/mp_db?characterEncoding=utf-8&amp;serverTimezone=UTC</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">username</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">root</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">password</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">123456</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">driver-class-name</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">com.mysql.cj.jdbc.Driver</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_3创建mapper接口" tabindex="-1">③创建Mapper接口 <a class="header-anchor" href="#_3创建mapper接口" aria-hidden="true">#</a></h4><p>创建mapper接口继承BaseMapper接口</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">interface</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">UserMapper</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">BaseMapper</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_4配置mapper扫描" tabindex="-1">④配置Mapper扫描 <a class="header-anchor" href="#_4配置mapper扫描" aria-hidden="true">#</a></h4><p>​ 在启动类上配置我们的Mapper在哪个包。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">SpringBootApplication</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">MapperScan</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;com.dunxi.mapper&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">DXApplication</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">static</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">main</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">String</span><span style="color:#C9D1D9;">[] </span><span style="color:#FFA657;">args</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        SpringApplication.</span><span style="color:#D2A8FF;">run</span><span style="color:#C9D1D9;">(DXApplication.class,args);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_5获取mapper进行测试" tabindex="-1">⑤获取Mapper进行测试 <a class="header-anchor" href="#_5获取mapper进行测试" aria-hidden="true">#</a></h4><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">SpringBootTest</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">MPTest</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Autowired</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> UserMapper</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">userMapper;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testQueryList</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">        System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(userMapper.</span><span style="color:#D2A8FF;">selectList</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">));</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_3-常用设置" tabindex="-1">3.常用设置 <a class="header-anchor" href="#_3-常用设置" aria-hidden="true">#</a></h2><h3 id="_3-1-设置表映射规则" tabindex="-1">3.1 设置表映射规则 <a class="header-anchor" href="#_3-1-设置表映射规则" aria-hidden="true">#</a></h3><p>​ 默认情况下MP操作的表明就是实体类的类名，但是如果表名和类名不一致就需要我们自己设置映射规则。</p><h4 id="_3-1-1-单独设置" tabindex="-1">3.1.1 单独设置 <a class="header-anchor" href="#_3-1-1-单独设置" aria-hidden="true">#</a></h4><p>​ 我们可以在实体类上面加上@@TableName注解来进行标识。</p><p>例如：</p><p>​ 如果表明是tb_user,而实体类名是User则可以使用如下写法。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">TableName</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;tb_user&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">User</span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">//.....</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_3-1-2-全局设置表名前缀" tabindex="-1">3.1.2 全局设置表名前缀 <a class="header-anchor" href="#_3-1-2-全局设置表名前缀" aria-hidden="true">#</a></h4><p>​ 一般一个项目表名的前缀都是统一风格的，这个时候如果一个个设置就太麻烦了。我们可以通过配置来设置全局的表名前缀。</p><p>例如：</p><p>​ 如果一个项目中所有的表名相比于类名都多了个前缀：tb_ 这可以使用如下方式配置</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#7EE787;">mybatis-plus</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">global-config</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">db-config</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#8B949E;">#      表名前缀</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">table-prefix</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">tb_</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-2-设置主键生成策略" tabindex="-1">3.2 设置主键生成策略 <a class="header-anchor" href="#_3-2-设置主键生成策略" aria-hidden="true">#</a></h3><h4 id="_3-2-0-测试代码" tabindex="-1">3.2.0 测试代码 <a class="header-anchor" href="#_3-2-0-测试代码" aria-hidden="true">#</a></h4><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testInsert</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    User</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">user</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">User</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    user.</span><span style="color:#D2A8FF;">setUserName</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;敦禧科技&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    user.</span><span style="color:#D2A8FF;">setPassword</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;123&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">int</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">r</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">insert</span><span style="color:#C9D1D9;">(user);</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(r);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-2-1-单独设置" tabindex="-1">3.2.1 单独设置 <a class="header-anchor" href="#_3-2-1-单独设置" aria-hidden="true">#</a></h4><p>​ 默认情况下使用MP插入数据时，如果在我们没有设置主键生成策略的情况下，默认的策略是基于雪花算法的自增ID。</p><p>​ 如果我们需要使用别的策略，可以在定义实体类时，在代表主键的字段上加上@TableId注解，使用其type属性指定主键生成策略。</p><p>例如：</p><p>​ 我们要设置主键自动增长则可以设置如下</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Data</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">AllArgsConstructor</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">NoArgsConstructor</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">User</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">TableId</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> IdType.AUTO)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Long</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">id;</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>全部主键策略定义在了枚举类<code>IdType</code>中，<code>IdType</code>有如下取值</p><ul><li><p><code>AUTO</code></p><p>数据库ID自增，依赖于数据库。该类型请确保数据库设置了ID自增，否则无效</p></li><li><p><code>NONE</code></p><p>未设置主键类型。若在代码中没有手动设置主键，则会根据主键的全局策略自动生成（默认的主键全局策略是基于雪花算法自动增的id）</p></li><li><p><code>INPUT</code></p><p>需要手动设置主键，若不设置。插入操作生成SQL语句时，主键这一列的值会是null。</p></li><li><p><code>ASSIGN_ID</code></p><p>当没有手动设置主键，即实体类中的主键属性为空时，才会自动填充，使用雪花算法</p></li><li><p><code>ASSIGN_UUID</code></p><p>当实体类的主键属性为空时，才会自动填充，使用UUID</p></li></ul><h4 id="_3-2-2-全局设置" tabindex="-1">3.2.2 全局设置 <a class="header-anchor" href="#_3-2-2-全局设置" aria-hidden="true">#</a></h4><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#7EE787;">mybatis-plus</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">global-config</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">db-config</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#8B949E;"># id生成策略 auto为数据库自增</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">id-type</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">auto</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-3-设置字段映射关系" tabindex="-1">3.3 设置字段映射关系 <a class="header-anchor" href="#_3-3-设置字段映射关系" aria-hidden="true">#</a></h3><p>​ 默认情况下MP会根据实体类的属性名去映射表名。</p><p>​ 如果数据库中的列表和实体类的属性名不一致了，我们可以使用@TableField注解的value属性去设置映射关系。</p><p>例如：</p><p>​ 如果表中一个列名叫address而 实体类中的属性名为addressStr则可以使用如下方式进行配置。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">TableField</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;address&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">addressStr;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-4-设置字段和列名的驼峰映射" tabindex="-1">3.4 设置字段和列名的驼峰映射 <a class="header-anchor" href="#_3-4-设置字段和列名的驼峰映射" aria-hidden="true">#</a></h3><p>​ 默认情况下MP会开启字段名和列名的驼峰映射，即从经典数据库列名A_COLUMN(下划线命名)到经典的aColumn（驼峰命名）的类似映射规则。</p><p>​ 如果需要关闭我们可以使用如下配置进行关闭。</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#7EE787;">mybatis-plus</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">configuration</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">#是否开启自动驼峰命名规则（camel case）映射，即从经典数据库列名 A_COLUMN（下划线命名） 到经典 Java 属性名 aColumn（驼峰命名） 的类似映射</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">map-underscore-to-camel-case</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-5-日志" tabindex="-1">3.5 日志 <a class="header-anchor" href="#_3-5-日志" aria-hidden="true">#</a></h3><p>​ 如果需要打印MP操作对应的SQL语句等。可以配置日志输出。</p><p>配置方式如下：</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#7EE787;">mybatis-plus</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">configuration</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">log-impl</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">org.apache.ibatis.logging.stdout.StdOutImpl</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_4-基本使用" tabindex="-1">4.基本使用 <a class="header-anchor" href="#_4-基本使用" aria-hidden="true">#</a></h2><h3 id="_4-1-插入数据" tabindex="-1">4.1 插入数据 <a class="header-anchor" href="#_4-1-插入数据" aria-hidden="true">#</a></h3><p>​ 我们可以使用insert方法来实现数据的插入。</p><p>示例：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testInsert</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    User</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">user</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">User</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    user.</span><span style="color:#D2A8FF;">setUserName</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;敦禧科技&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    user.</span><span style="color:#D2A8FF;">setPassword</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;123&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">int</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">r</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">insert</span><span style="color:#C9D1D9;">(user);</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(r);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_4-2-删除操作" tabindex="-1">4.2 删除操作 <a class="header-anchor" href="#_4-2-删除操作" aria-hidden="true">#</a></h3><p>​ 我们可以使用deleteXXX方法来实现数据的删除。</p><p>示例：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testDelete</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">Integer</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">ids</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">    ids.</span><span style="color:#D2A8FF;">add</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">5</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    ids.</span><span style="color:#D2A8FF;">add</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">6</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    ids.</span><span style="color:#D2A8FF;">add</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">7</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">int</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">i</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">deleteBatchIds</span><span style="color:#C9D1D9;">(ids);</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(i);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testDeleteById</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">int</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">i</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">deleteById</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">9</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(i);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testDeleteByMap</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    Map</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">String</span><span style="color:#FFA657;">, </span><span style="color:#FF7B72;">Object</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">map</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> HashMap&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">    map.</span><span style="color:#D2A8FF;">put</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;name&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&quot;提姆&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    map.</span><span style="color:#D2A8FF;">put</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">22</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">int</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">i</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">deleteByMap</span><span style="color:#C9D1D9;">(map);</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(i);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="_4-3-更新操作" tabindex="-1">4.3 更新操作 <a class="header-anchor" href="#_4-3-更新操作" aria-hidden="true">#</a></h3><p>​ 我们可以使用updateXXX方法实现数据的更新。</p><p>示例：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testUpdate</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    User</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">user</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">User</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    user.</span><span style="color:#D2A8FF;">setId</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">1l</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    user.</span><span style="color:#D2A8FF;">setName</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;瑞雯&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    userMapper.</span><span style="color:#D2A8FF;">updateById</span><span style="color:#C9D1D9;">(user);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_5-条件构造器wrapper" tabindex="-1">5.条件构造器Wrapper <a class="header-anchor" href="#_5-条件构造器wrapper" aria-hidden="true">#</a></h2><h3 id="_5-1-概述" tabindex="-1">5.1 概述 <a class="header-anchor" href="#_5-1-概述" aria-hidden="true">#</a></h3><p>​ 我们在实际操作数据库的时候会涉及到很多的条件。所以MP为我们提供了一个功能强大的条件构造器Wrapper。使用它可以让我们非常方便的构造条件。</p><p>​ 其继承体系如下：</p><p><img src="https://bed-1309358403.cos.ap-shanghai.myqcloud.com/img/2023/01/08/20230108220151.png" alt="image-20220706193213457"></p><p>​ 在其子类AbstractWrapper中只能怪提供了很多用于构造where条件的方法。</p><p>​ AbstractWrapper的子类QueryWrapper则额外提供了用于针对Select语法的select方法。可以用来设置查询哪些列。</p><p>​ AbstractWrapper的子类UpdateWrapper则额外提供了用于针对set语法的set方法。可以用来设置对哪些列进行更新。</p><p>完整的AbstractWrapper方法可以参照：<a href="https://baomidou.com/guide/wrapper.html#abstractwrapper" target="_blank" rel="noreferrer">https://baomidou.com/guide/wrapper.html#abstractwrapper</a></p><p>介绍是用来干什么的。它的实现类有哪些</p><p>QueryWrapper,UpdateWrapper，【LambdaQueryWrapper】</p><h3 id="_5-2-常用abstractwrapper方法" tabindex="-1">5.2 常用AbstractWrapper方法 <a class="header-anchor" href="#_5-2-常用abstractwrapper方法" aria-hidden="true">#</a></h3><blockquote><p>eq：equals，等于 gt：greater than ，大于 &gt; ge：greater than or equals，大于等于≥ lt：less than，小于&lt; le：less than or equals，小于等于≤ between：相当于SQL中的BETWEEN like：模糊匹配。like(&quot;name&quot;,&quot;黄&quot;)，相当于SQL的name like &#39;%黄%&#39; likeRight：模糊匹配右半边。likeRight(&quot;name&quot;,&quot;黄&quot;)，相当于SQL的name like &#39;黄%&#39; likeLeft：模糊匹配左半边。likeLeft(&quot;name&quot;,&quot;黄&quot;)，相当于SQL的name like &#39;%黄&#39; notLike：notLike(&quot;name&quot;,&quot;黄&quot;)，相当于SQL的name not like &#39;%黄%&#39; isNull isNotNull and：SQL连接符AND or：SQL连接符OR</p><p>in: in(“age&quot;,{1,2,3})相当于 age in(1,2,3)</p><p>groupBy: groupBy(&quot;id&quot;,&quot;name&quot;)相当于 group by id,name</p><p>orderByAsc :orderByAsc(&quot;id&quot;,&quot;name&quot;)相当于 order by id ASC,name ASC</p><p>orderByDesc :orderByDesc (&quot;id&quot;,&quot;name&quot;)相当于 order by id DESC,name DESC</p></blockquote><h4 id="示例一" tabindex="-1">示例一 <a class="header-anchor" href="#示例一" aria-hidden="true">#</a></h4><p>SQL语句如下：</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">SELECT</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> id,user_name,</span><span style="color:#FF7B72;">PASSWORD</span><span style="color:#C9D1D9;">,</span><span style="color:#FF7B72;">NAME</span><span style="color:#C9D1D9;">,age,</span><span style="color:#FF7B72;">address</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#FF7B72;">FROM</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> USER </span></span>
<span class="line"><span style="color:#FF7B72;">WHERE</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> age </span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">18</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">AND</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">address</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;狐山&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果用Wrapper写法如下：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testWrapper01</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">        QueryWrapper</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">wrapper</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">QueryWrapper</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        wrapper.</span><span style="color:#D2A8FF;">gt</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">18</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        wrapper.</span><span style="color:#D2A8FF;">eq</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;address&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&quot;狐山&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">users</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">selectList</span><span style="color:#C9D1D9;">(wrapper);</span></span>
<span class="line"><span style="color:#C9D1D9;">        System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(users);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="示例二" tabindex="-1">示例二 <a class="header-anchor" href="#示例二" aria-hidden="true">#</a></h4><p>SQL语句如下：</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">SELECT</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> id,user_name,</span><span style="color:#FF7B72;">PASSWORD</span><span style="color:#C9D1D9;">,</span><span style="color:#FF7B72;">NAME</span><span style="color:#C9D1D9;">,age,</span><span style="color:#FF7B72;">address</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#FF7B72;">FROM</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> USER </span></span>
<span class="line"><span style="color:#FF7B72;">WHERE</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> id </span><span style="color:#FF7B72;">IN</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">AND</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> age </span><span style="color:#FF7B72;">BETWEEN</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">12</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">AND</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">29</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">AND</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">address</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">LIKE</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;%山%&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>如果用Wrapper写法如下：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testWrapper02</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">        QueryWrapper</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">wrapper</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> QueryWrapper&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">        wrapper.</span><span style="color:#D2A8FF;">in</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        wrapper.</span><span style="color:#D2A8FF;">between</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">12</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">29</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        wrapper.</span><span style="color:#D2A8FF;">like</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;address&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&quot;山&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">users</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">selectList</span><span style="color:#C9D1D9;">(wrapper);</span></span>
<span class="line"><span style="color:#C9D1D9;">        System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(users);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="示例三" tabindex="-1">示例三 <a class="header-anchor" href="#示例三" aria-hidden="true">#</a></h4><p>SQL语句如下：</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">SELECT</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> id,user_name,</span><span style="color:#FF7B72;">PASSWORD</span><span style="color:#C9D1D9;">,</span><span style="color:#FF7B72;">NAME</span><span style="color:#C9D1D9;">,age,</span><span style="color:#FF7B72;">address</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#FF7B72;">FROM</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> USER </span></span>
<span class="line"><span style="color:#FF7B72;">WHERE</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> id </span><span style="color:#FF7B72;">IN</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">AND</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> age </span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">10</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#FF7B72;">ORDER BY</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> age </span><span style="color:#FF7B72;">DESC</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>如果用Wrapper写法如下：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testWrapper03</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">        QueryWrapper</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">queryWrapper</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> QueryWrapper&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">        queryWrapper.</span><span style="color:#D2A8FF;">in</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        queryWrapper.</span><span style="color:#D2A8FF;">gt</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">10</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        queryWrapper.</span><span style="color:#D2A8FF;">orderByDesc</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">users</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">selectList</span><span style="color:#C9D1D9;">(queryWrapper);</span></span>
<span class="line"><span style="color:#C9D1D9;">        System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(users);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_5-3-常用querywrapper方法" tabindex="-1">5.3 常用QueryWrapper方法 <a class="header-anchor" href="#_5-3-常用querywrapper方法" aria-hidden="true">#</a></h3><p>​ QueryWrapper的select可以设置要查询的列。</p><h4 id="示例一-1" tabindex="-1">示例一 <a class="header-anchor" href="#示例一-1" aria-hidden="true">#</a></h4><blockquote><p>select(String... sqlSelect) 方法的测试为要查询的列名</p></blockquote><p>SQL语句如下：</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">SELECT</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> id,user_name</span></span>
<span class="line"><span style="color:#FF7B72;">FROM</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> USER </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>MP写法如下：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testSelect01</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">        QueryWrapper</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">queryWrapper</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> QueryWrapper&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">        queryWrapper.</span><span style="color:#D2A8FF;">select</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&quot;user_name&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">users</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">selectList</span><span style="color:#C9D1D9;">(queryWrapper);</span></span>
<span class="line"><span style="color:#C9D1D9;">        System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(users);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="示例二-1" tabindex="-1">示例二 <a class="header-anchor" href="#示例二-1" aria-hidden="true">#</a></h4><blockquote><p><code>select(Class&lt;T&gt; entityClass, Predicate&lt;TableFieldInfo&gt; predicate)</code></p></blockquote><p>方法的第一个参数为实体类的字节码对象，第二个参数为Predicate类型，可以使用lambda的写法，过滤要查询的字段（主键除外）。</p><p>SQL语句如下：</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">SELECT</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> id,user_name</span></span>
<span class="line"><span style="color:#FF7B72;">FROM</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> USER </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>MP写法如下：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testSelect02</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">        QueryWrapper</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">queryWrapper</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> QueryWrapper&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">        queryWrapper.</span><span style="color:#D2A8FF;">select</span><span style="color:#C9D1D9;">(User.class, </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> Predicate&lt;</span><span style="color:#FF7B72;">TableFieldInfo</span><span style="color:#C9D1D9;">&gt;() {</span></span>
<span class="line"><span style="color:#C9D1D9;">            @</span><span style="color:#FF7B72;">Override</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">boolean</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">test</span><span style="color:#C9D1D9;">(TableFieldInfo </span><span style="color:#FFA657;">tableFieldInfo</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;user_name&quot;</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">equals</span><span style="color:#C9D1D9;">(tableFieldInfo.</span><span style="color:#D2A8FF;">getColumn</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">            }</span></span>
<span class="line"><span style="color:#C9D1D9;">        });</span></span>
<span class="line"><span style="color:#C9D1D9;">        List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">users</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">selectList</span><span style="color:#C9D1D9;">(queryWrapper);</span></span>
<span class="line"><span style="color:#C9D1D9;">        System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(users);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="示例三-1" tabindex="-1">示例三 <a class="header-anchor" href="#示例三-1" aria-hidden="true">#</a></h4><blockquote><p><code>select(Predicate&lt;TableFieldInfo&gt; predicate)</code></p></blockquote><p>方法第一个参数为Predicate类型，可以使用lambda的写法，过滤要查询的字段 (主键除外) 。</p><p>SQL语句如下：</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">SELECT</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> id,user_name,</span><span style="color:#FF7B72;">PASSWORD</span><span style="color:#C9D1D9;">,</span><span style="color:#FF7B72;">NAME</span><span style="color:#C9D1D9;">,age </span></span>
<span class="line"><span style="color:#FF7B72;">FROM</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> USER</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>就是不想查询address这列，其他列都查询了</p><p>MP写法如下：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testSelect03</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">        QueryWrapper</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">queryWrapper</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> QueryWrapper&lt;&gt;(</span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">User</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">        queryWrapper.</span><span style="color:#D2A8FF;">select</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> Predicate&lt;</span><span style="color:#FF7B72;">TableFieldInfo</span><span style="color:#C9D1D9;">&gt;() {</span></span>
<span class="line"><span style="color:#C9D1D9;">            @</span><span style="color:#FF7B72;">Override</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">boolean</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">test</span><span style="color:#C9D1D9;">(TableFieldInfo </span><span style="color:#FFA657;">tableFieldInfo</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">!</span><span style="color:#A5D6FF;">&quot;address&quot;</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">equals</span><span style="color:#C9D1D9;">(tableFieldInfo.</span><span style="color:#D2A8FF;">getColumn</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">            }</span></span>
<span class="line"><span style="color:#C9D1D9;">        });</span></span>
<span class="line"><span style="color:#C9D1D9;">        List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">users</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">selectList</span><span style="color:#C9D1D9;">(queryWrapper);</span></span>
<span class="line"><span style="color:#C9D1D9;">        System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(users);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_5-4-常用的updatewrapper方法" tabindex="-1">5.4 常用的UpdateWrapper方法 <a class="header-anchor" href="#_5-4-常用的updatewrapper方法" aria-hidden="true">#</a></h3><p>​ 我们前面在使用update方法时需要创建一个实体类对象传入，用来指定要更新的列及对应的值。但是如果需要更新的列比较少时，创建这么一个对象显得有点麻烦和复杂。</p><p>​ 我们可以使用UpdateWrapper的set方法来设置要更新的列及其值。同时这种方法也可以使用Wrapper去指定更复杂的更新条件。</p><h4 id="示例" tabindex="-1">示例 <a class="header-anchor" href="#示例" aria-hidden="true">#</a></h4><p>SQL语句如下：</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">UPDATE</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> USER</span></span>
<span class="line"><span style="color:#FF7B72;">SET</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> age </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">99</span></span>
<span class="line"><span style="color:#FF7B72;">where</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> id </span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">1</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>​ 我们想把id大于1的用户的年龄修改为99，则可以使用如下写法：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testUpdateWrapper</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">        UpdateWrapper</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">updateWrapper</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> UpdateWrapper&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">        updateWrapper.</span><span style="color:#D2A8FF;">gt</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        updateWrapper.</span><span style="color:#D2A8FF;">set</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">99</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        userMapper.</span><span style="color:#D2A8FF;">update</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">,updateWrapper);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_5-5-lambda条件构造器" tabindex="-1">5.5 Lambda条件构造器 <a class="header-anchor" href="#_5-5-lambda条件构造器" aria-hidden="true">#</a></h3><p>​ 我们前面在使用条件构造器时列名都是用字符串的形式指定。这种方式无法在编译期确定列名的合法性。</p><p>​ 所以MP提供了一个Lambda条件构造器可以让我们直接以实体类的方法引用的形式来指定列名。这样就可以弥补上述缺陷。</p><h4 id="示例-1" tabindex="-1">示例 <a class="header-anchor" href="#示例-1" aria-hidden="true">#</a></h4><p>要执行的查询对应的SQL如下</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">SELECT</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> id,user_name,</span><span style="color:#FF7B72;">PASSWORD</span><span style="color:#C9D1D9;">,</span><span style="color:#FF7B72;">NAME</span><span style="color:#C9D1D9;">,age,</span><span style="color:#FF7B72;">address</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#FF7B72;">FROM</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> USER </span></span>
<span class="line"><span style="color:#FF7B72;">WHERE</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> age </span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">18</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">AND</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">address</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;狐山&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果使用之前的条件构造器写法如下</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testLambdaWrapper</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">        QueryWrapper</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">queryWrapper</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">QueryWrapper</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        queryWrapper.</span><span style="color:#D2A8FF;">gt</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">18</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        queryWrapper.</span><span style="color:#D2A8FF;">eq</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;address&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&quot;狐山&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">users</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">selectList</span><span style="color:#C9D1D9;">(queryWrapper);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>如果使用Lambda条件构造器写法如下</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testLambdaWrapper2</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">        LambdaQueryWrapper</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">queryWrapper</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> LambdaQueryWrapper&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">        queryWrapper.</span><span style="color:#D2A8FF;">gt</span><span style="color:#C9D1D9;">(User</span><span style="color:#FF7B72;">::</span><span style="color:#C9D1D9;">getAge,</span><span style="color:#79C0FF;">18</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        queryWrapper.</span><span style="color:#D2A8FF;">eq</span><span style="color:#C9D1D9;">(User</span><span style="color:#FF7B72;">::</span><span style="color:#C9D1D9;">getAddress,</span><span style="color:#A5D6FF;">&quot;狐山&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">users</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">selectList</span><span style="color:#C9D1D9;">(queryWrapper);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_6-自定义sql" tabindex="-1">6.自定义SQL <a class="header-anchor" href="#_6-自定义sql" aria-hidden="true">#</a></h2><p>​ 虽然MP为我们提供了很多常用的方法，并且也提供了条件构造器。但是如果真的遇到了复制的SQL时，我们还是需要自己去定义方法，自己去写对应的SQL，这样SQL也更有利于后期维护。</p><p>​ 因为MP是对mybatis做了增强，所以还是支持之前Mybatis的方式去自定义方法。</p><p>​ 同时也支持在使用Mybatis的自定义方法时使用MP的条件构造器帮助我们进行条件构造。</p><h3 id="_6-0-准备工作" tabindex="-1">6.0 准备工作 <a class="header-anchor" href="#_6-0-准备工作" aria-hidden="true">#</a></h3><p>①准备数据</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">CREATE</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">TABLE</span><span style="color:#C9D1D9;"> \`</span><span style="color:#D2A8FF;">orders</span><span style="color:#C9D1D9;">\` (</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`id\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">bigint</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">20</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">NOT NULL</span><span style="color:#C9D1D9;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`price\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">11</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;价格&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`remark\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">varchar</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">100</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;备注&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`user_id\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">11</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;用户id&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`update_time\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">timestamp</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;更新时间&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`create_time\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">timestamp</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;创建时间&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`version\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">11</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;1&#39;</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;版本&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`del_flag\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;0&#39;</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;逻辑删除标识,0-未删除,1-已删除&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`create_by\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">varchar</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">100</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;创建人&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">\`update_by\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">varchar</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">100</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;更新人&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">PRIMARY KEY</span><span style="color:#C9D1D9;"> (</span><span style="color:#A5D6FF;">\`id\`</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">) ENGINE</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">InnoDB AUTO_INCREMENT</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">6</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> CHARSET</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">/*Data for the table \`orders\` */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">insert  into</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">\`orders\`</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">\`id\`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">\`price\`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">\`remark\`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">\`user_id\`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">\`update_time\`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">\`create_time\`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">\`version\`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">\`del_flag\`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">\`create_by\`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">\`update_by\`</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">values</span><span style="color:#C9D1D9;"> (</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">2000</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;无&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;2021-08-24 21:02:43&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;2021-08-24 21:02:46&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">,</span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">,</span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">),(</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">3000</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;无&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;2021-08-24 21:03:32&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;2021-08-24 21:03:35&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">,</span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">,</span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">),(</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">4000</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;无&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;2021-08-24 21:03:39&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;2021-08-24 21:03:41&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">,</span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">,</span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>②创建实体类</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Data</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">NoArgsConstructor</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">AllArgsConstructor</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">Orders</span><span style="color:#C9D1D9;">  {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Long</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">    /**</span></span>
<span class="line"><span style="color:#8B949E;">     * 价格</span></span>
<span class="line"><span style="color:#8B949E;">     */</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Integer</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">price;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">    /**</span></span>
<span class="line"><span style="color:#8B949E;">     * 备注</span></span>
<span class="line"><span style="color:#8B949E;">     */</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">remark;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">    /**</span></span>
<span class="line"><span style="color:#8B949E;">     * 用户id</span></span>
<span class="line"><span style="color:#8B949E;">     */</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Integer</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">userId;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">    /**</span></span>
<span class="line"><span style="color:#8B949E;">     * 更新时间</span></span>
<span class="line"><span style="color:#8B949E;">     */</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> LocalDateTime</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">updateTime;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">    /**</span></span>
<span class="line"><span style="color:#8B949E;">     * 创建时间</span></span>
<span class="line"><span style="color:#8B949E;">     */</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> LocalDateTime</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">createTime;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">    /**</span></span>
<span class="line"><span style="color:#8B949E;">     * 版本</span></span>
<span class="line"><span style="color:#8B949E;">     */</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Integer</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">version;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">    /**</span></span>
<span class="line"><span style="color:#8B949E;">     * 逻辑删除标识,0-未删除,1-已删除</span></span>
<span class="line"><span style="color:#8B949E;">     */</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Integer</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">delFlag;</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h3 id="_6-1-mybatis方式" tabindex="-1">6.1 Mybatis方式 <a class="header-anchor" href="#_6-1-mybatis方式" aria-hidden="true">#</a></h3><h4 id="_1定义方法" tabindex="-1">①定义方法 <a class="header-anchor" href="#_1定义方法" aria-hidden="true">#</a></h4><p>​ 在Mapper接口中定义方法</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">interface</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">UserMapper</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">BaseMapper</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    User </span><span style="color:#D2A8FF;">findMyUser</span><span style="color:#C9D1D9;">(Long </span><span style="color:#FFA657;">id</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_2创建xml" tabindex="-1">②创建xml <a class="header-anchor" href="#_2创建xml" aria-hidden="true">#</a></h4><p>​ 先配置xml文件的存放目录</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#7EE787;">mybatis-plus</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">mapper-locations</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">classpath*:/mapper/**/*.xml</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>​ 创建对应的xml映射文件</p><h4 id="_3在xml映射文件中编写sql" tabindex="-1">③在xml映射文件中编写SQL <a class="header-anchor" href="#_3在xml映射文件中编写sql" aria-hidden="true">#</a></h4><p>​ 创建对应的标签，编写对应的SQL语句</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">&lt;?</span><span style="color:#C9D1D9;">xml version</span><span style="color:#FF7B72;">=</span><span style="color:#A5D6FF;">&quot;1.0&quot;</span><span style="color:#C9D1D9;"> encoding</span><span style="color:#FF7B72;">=</span><span style="color:#A5D6FF;">&quot;UTF-8&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">?&gt;</span></span>
<span class="line"><span style="color:#FF7B72;">&lt;!</span><span style="color:#C9D1D9;">DOCTYPE mapper PUBLIC </span><span style="color:#A5D6FF;">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">&gt;</span></span>
<span class="line"><span style="color:#FF7B72;">&lt;</span><span style="color:#C9D1D9;">mapper namespace</span><span style="color:#FF7B72;">=</span><span style="color:#A5D6FF;">&quot;com.sangeng.mapper.UserMapper&quot;</span><span style="color:#FF7B72;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">&lt;</span><span style="color:#C9D1D9;">select id</span><span style="color:#FF7B72;">=</span><span style="color:#A5D6FF;">&quot;findMyUser&quot;</span><span style="color:#C9D1D9;"> resultType</span><span style="color:#FF7B72;">=</span><span style="color:#A5D6FF;">&quot;com.sangeng.domian.User&quot;</span><span style="color:#FF7B72;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">       select </span><span style="color:#FF7B72;">*</span><span style="color:#C9D1D9;"> from user where id </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> #{id} </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">&lt;/</span><span style="color:#C9D1D9;">select</span><span style="color:#FF7B72;">&gt;</span></span>
<span class="line"><span style="color:#FF7B72;">&lt;/</span><span style="color:#C9D1D9;">mapper</span><span style="color:#FF7B72;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_6-2-mybatis方式结合条件构造器" tabindex="-1">6.2 Mybatis方式结合条件构造器 <a class="header-anchor" href="#_6-2-mybatis方式结合条件构造器" aria-hidden="true">#</a></h3><p>​ 我们在使用上述方式自定义方法时。如果也希望我们的自定义方法能像MP自带方法一样使用条件构造器来进行条件构造的话只需要使用如下方式即可。</p><p>①方法定义中添加Warpper类型的参数</p><p>添加Warpper类型的参数，并且要主义给其指定参数名。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">interface</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">UserMapper</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">BaseMapper</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; {</span></span>
<span class="line"><span style="color:#C9D1D9;">    User </span><span style="color:#D2A8FF;">findMyUserByWrapper</span><span style="color:#C9D1D9;">(@</span><span style="color:#FF7B72;">Param</span><span style="color:#C9D1D9;">(Constants.WRAPPER)Wrapper&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#FFA657;">wrapper</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>②在SQL语句中获取Wrapper拼接的SQL片段进行拼接。</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findMyUserByWrapper&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.domian.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    select * from tb_user \${ew.customSqlSegment}</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>注意：不能使用#{}应该使用\${}</p><h2 id="_7-分页查询" tabindex="-1">7.分页查询 <a class="header-anchor" href="#_7-分页查询" aria-hidden="true">#</a></h2><h3 id="_7-1-基本分页查询" tabindex="-1">7.1 基本分页查询 <a class="header-anchor" href="#_7-1-基本分页查询" aria-hidden="true">#</a></h3><p>①配置分页查询拦截器</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Configuration</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">PageConfig</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#8B949E;">    /**</span></span>
<span class="line"><span style="color:#8B949E;">     * 3.4.0之前的版本</span></span>
<span class="line"><span style="color:#8B949E;">     * </span><span style="color:#FF7B72;">@return</span></span>
<span class="line"><span style="color:#8B949E;">     */</span></span>
<span class="line"><span style="color:#C9D1D9;">   </span><span style="color:#8B949E;">/* @Bean</span></span>
<span class="line"><span style="color:#8B949E;">    public PaginationInterceptor paginationInterceptor(){</span></span>
<span class="line"><span style="color:#8B949E;">        return  new PaginationInterceptor();</span></span>
<span class="line"><span style="color:#8B949E;">    }*/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">    /**</span></span>
<span class="line"><span style="color:#8B949E;">     * 3.4.0之后版本</span></span>
<span class="line"><span style="color:#8B949E;">     * </span><span style="color:#FF7B72;">@return</span></span>
<span class="line"><span style="color:#8B949E;">     */</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Bean</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> MybatisPlusInterceptor </span><span style="color:#D2A8FF;">mybatisPlusInterceptor</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">        MybatisPlusInterceptor</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">mybatisPlusInterceptor</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">MybatisPlusInterceptor</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        mybatisPlusInterceptor.</span><span style="color:#D2A8FF;">addInnerInterceptor</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">PaginationInnerInterceptor</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> mybatisPlusInterceptor;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>②进行分页查询</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testPage</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    IPage</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">page</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> Page&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">//设置每页条数</span></span>
<span class="line"><span style="color:#C9D1D9;">    page.</span><span style="color:#D2A8FF;">setSize</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">//设置查询第几页</span></span>
<span class="line"><span style="color:#C9D1D9;">    page.</span><span style="color:#D2A8FF;">setCurrent</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    userMapper.</span><span style="color:#D2A8FF;">selectPage</span><span style="color:#C9D1D9;">(page, </span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(page.</span><span style="color:#D2A8FF;">getRecords</span><span style="color:#C9D1D9;">());</span><span style="color:#8B949E;">//获取当前页的数据</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(page.</span><span style="color:#D2A8FF;">getTotal</span><span style="color:#C9D1D9;">());</span><span style="color:#8B949E;">//获取总记录数</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(page.</span><span style="color:#D2A8FF;">getCurrent</span><span style="color:#C9D1D9;">());</span><span style="color:#8B949E;">//获取当前页码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_7-2-多表分页查询" tabindex="-1">7.2 多表分页查询 <a class="header-anchor" href="#_7-2-多表分页查询" aria-hidden="true">#</a></h3><p>​ 如果需要在多表查询时进行分页查询的话，就可以在mapper接口中自定义方法，然后让方法接受Page对象。</p><h4 id="示例-2" tabindex="-1">示例 <a class="header-anchor" href="#示例-2" aria-hidden="true">#</a></h4><h5 id="需求" tabindex="-1">需求 <a class="header-anchor" href="#需求" aria-hidden="true">#</a></h5><p>​ 我们需要去查询Orders表，并且要求查询的时候除了要获取到Orders表中的字段，还要获取到每个订单的下单用户的用户名。</p><h5 id="准备工作" tabindex="-1">准备工作 <a class="header-anchor" href="#准备工作" aria-hidden="true">#</a></h5><h6 id="sql准备" tabindex="-1">SQL准备 <a class="header-anchor" href="#sql准备" aria-hidden="true">#</a></h6><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">select</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;">o.</span><span style="color:#FF7B72;">*</span><span style="color:#C9D1D9;"> , </span><span style="color:#79C0FF;">u</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">user_name</span></span>
<span class="line"><span style="color:#FF7B72;">FROM</span></span>
<span class="line"><span style="color:#C9D1D9;"> tb_user u,orders o</span></span>
<span class="line"><span style="color:#FF7B72;">WHERE</span></span>
<span class="line"><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">o</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">user_id</span><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">u</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">id</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h6 id="实体类修改" tabindex="-1">实体类修改 <a class="header-anchor" href="#实体类修改" aria-hidden="true">#</a></h6><p>增加一个userName属性</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Data</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">NoArgsConstructor</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">AllArgsConstructor</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">Orders</span><span style="color:#C9D1D9;">  {</span></span>
<span class="line"><span style="color:#C9D1D9;"> </span><span style="color:#8B949E;">//省略无关代码</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">userName;</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="实现" tabindex="-1">实现 <a class="header-anchor" href="#实现" aria-hidden="true">#</a></h5><p>①定义接口，定义方法</p><p>方法第一个参数定义成Page类型</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">interface</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">OrdersMapper</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">BaseMapper</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#FF7B72;">Orders</span><span style="color:#C9D1D9;">&gt; {</span></span>
<span class="line"><span style="color:#C9D1D9;">    IPage&lt;</span><span style="color:#FF7B72;">Orders</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">findAllOrders</span><span style="color:#C9D1D9;">(Page&lt;</span><span style="color:#FF7B72;">Orders</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#FFA657;">page</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在xml中不需要关心分页操作，MP会帮我们完成。</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;?</span><span style="color:#7EE787;">xml</span><span style="color:#79C0FF;"> version</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;1.0&quot;</span><span style="color:#79C0FF;"> encoding</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;UTF-8&quot;</span><span style="color:#C9D1D9;"> ?&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;!</span><span style="color:#FF7B72;">DOCTYPE</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">mapper</span><span style="color:#C9D1D9;"> PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot; &gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">namespace</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.mapper.OrdersMapper&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findAllOrders&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.domian.Orders&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        select</span></span>
<span class="line"><span style="color:#C9D1D9;">            o.* , u.user_name</span></span>
<span class="line"><span style="color:#C9D1D9;">        FROM</span></span>
<span class="line"><span style="color:#C9D1D9;">            tb_user u,orders o</span></span>
<span class="line"><span style="color:#C9D1D9;">        WHERE</span></span>
<span class="line"><span style="color:#C9D1D9;">            o.user_id  = u.id</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>然后调用方法测试即可。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Autowired</span></span>
<span class="line"><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> OrdersMapper</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">ordersMapper;</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testOrdersPage</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    Page</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">Orders</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">page</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> Page&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">//设置每页大小</span></span>
<span class="line"><span style="color:#C9D1D9;">    page.</span><span style="color:#D2A8FF;">setSize</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">//设置当前页码</span></span>
<span class="line"><span style="color:#C9D1D9;">    page.</span><span style="color:#D2A8FF;">setCurrent</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    ordersMapper.</span><span style="color:#D2A8FF;">findAllOrders</span><span style="color:#C9D1D9;">(page);</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(page.</span><span style="color:#D2A8FF;">getRecords</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(page.</span><span style="color:#D2A8FF;">getTotal</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_8-service-层接口" tabindex="-1">8.Service 层接口 <a class="header-anchor" href="#_8-service-层接口" aria-hidden="true">#</a></h2><p>​ MP也为我们提供了Service层的实现。我们只需要编写一个接口，继承<code>IService</code>，并创建一个接口实现类继承<code>ServiceImpl</code>，即可使用。</p><p>​ 相比于Mapper接口，Service层主要是支持了更多批量操作方法。</p><h3 id="_8-1-基本使用" tabindex="-1">8.1 基本使用 <a class="header-anchor" href="#_8-1-基本使用" aria-hidden="true">#</a></h3><h4 id="_8-1-1-改造前" tabindex="-1">8.1.1 改造前 <a class="header-anchor" href="#_8-1-1-改造前" aria-hidden="true">#</a></h4><p>定义接口</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">interface</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">UserService</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    List&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">list</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>定义实现类</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Service</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">UserServiceImpl</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">implements</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserService</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Autowired</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> UserMapper</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">userMapper;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Override</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> List&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">list</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">selectList</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_8-1-2-改造后" tabindex="-1">8.1.2 改造后 <a class="header-anchor" href="#_8-1-2-改造后" aria-hidden="true">#</a></h4><p>接口</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">interface</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">UserService</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">IService</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>实现类</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Service</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">UserServiceImpl</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ServiceImpl</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#FF7B72;">UserMapper</span><span style="color:#C9D1D9;">, </span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#FF7B72;">implements</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserService</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>测试</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testService</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">list</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userService.</span><span style="color:#D2A8FF;">list</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(list);</span></span>
<span class="line"><span style="color:#C9D1D9;">    Page</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">page</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> Page&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">//设置每页大小</span></span>
<span class="line"><span style="color:#C9D1D9;">    page.</span><span style="color:#D2A8FF;">setSize</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">//设置当前页码</span></span>
<span class="line"><span style="color:#C9D1D9;">    page.</span><span style="color:#D2A8FF;">setCurrent</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    userService.</span><span style="color:#D2A8FF;">page</span><span style="color:#C9D1D9;">(page);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(page.</span><span style="color:#D2A8FF;">getRecords</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(page.</span><span style="color:#D2A8FF;">setCurrent</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">));</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_8-2自定义方法" tabindex="-1">8.2自定义方法 <a class="header-anchor" href="#_8-2自定义方法" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Service</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">UserServiceImpl</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ServiceImpl</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#FF7B72;">UserMapper</span><span style="color:#C9D1D9;">, </span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#FF7B72;">implements</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserService</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Autowired</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> OrdersMapper</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">ordersMapper;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Override</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> User </span><span style="color:#D2A8FF;">test</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        UserMapper</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">userMapper</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">getBaseMapper</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">Orders</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">orders</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> ordersMapper.</span><span style="color:#D2A8FF;">selectList</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        User</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">user</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userMapper.</span><span style="color:#D2A8FF;">selectById</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">//查询用户对应的订单</span></span>
<span class="line"><span style="color:#C9D1D9;">        QueryWrapper</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">Orders</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">queryWrapper</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> QueryWrapper&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">        queryWrapper.</span><span style="color:#D2A8FF;">eq</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;user_id&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">        List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">Orders</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">orders1</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> ordersMapper.</span><span style="color:#D2A8FF;">selectList</span><span style="color:#C9D1D9;">(queryWrapper);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> user;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_9-代码生成器" tabindex="-1">9.代码生成器 <a class="header-anchor" href="#_9-代码生成器" aria-hidden="true">#</a></h2><p>​ MP提供了一个代码生成器，可以让我们一键生成实体类，Mapper接口，Service，Controller等全套代码。使用方式如下</p><h3 id="_1添加依赖-1" tabindex="-1">①添加依赖 <a class="header-anchor" href="#_1添加依赖-1" aria-hidden="true">#</a></h3><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">&lt;!--mybatisplus代码生成器--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;com.baomidou&lt;/</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;mybatis-plus-generator&lt;/</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">&gt;3.4.1&lt;/</span><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">&lt;!--模板引擎--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;org.freemarker&lt;/</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;freemarker&lt;/</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_2生成" tabindex="-1">②生成 <a class="header-anchor" href="#_2生成" aria-hidden="true">#</a></h3><p>​ 修改相应配置后执行以下代码即可</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">GeneratorTest</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;"> @</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">generate</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">  AutoGenerator</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">generator</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">AutoGenerator</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// 全局配置</span></span>
<span class="line"><span style="color:#C9D1D9;">  GlobalConfig</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">config</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">GlobalConfig</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">projectPath</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> System.</span><span style="color:#D2A8FF;">getProperty</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;user.dir&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// 设置输出到的目录</span></span>
<span class="line"><span style="color:#C9D1D9;">  config.</span><span style="color:#D2A8FF;">setOutputDir</span><span style="color:#C9D1D9;">(projectPath </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;/src/main/java&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">  config.</span><span style="color:#D2A8FF;">setAuthor</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;sangeng&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// 生成结束后是否打开文件夹</span></span>
<span class="line"><span style="color:#C9D1D9;">  config.</span><span style="color:#D2A8FF;">setOpen</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// 全局配置添加到 generator 上</span></span>
<span class="line"><span style="color:#C9D1D9;">  generator.</span><span style="color:#D2A8FF;">setGlobalConfig</span><span style="color:#C9D1D9;">(config);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// 数据源配置</span></span>
<span class="line"><span style="color:#C9D1D9;">  DataSourceConfig</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">dataSourceConfig</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">DataSourceConfig</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  dataSourceConfig.</span><span style="color:#D2A8FF;">setUrl</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;jdbc:mysql://localhost:3306/mp_db?characterEncoding=utf-8&amp;serverTimezone=UTC&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">  dataSourceConfig.</span><span style="color:#D2A8FF;">setDriverName</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">  dataSourceConfig.</span><span style="color:#D2A8FF;">setUsername</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;root&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">  dataSourceConfig.</span><span style="color:#D2A8FF;">setPassword</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;root&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// 数据源配置添加到 generator</span></span>
<span class="line"><span style="color:#C9D1D9;">  generator.</span><span style="color:#D2A8FF;">setDataSource</span><span style="color:#C9D1D9;">(dataSourceConfig);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// 包配置, 生成的代码放在哪个包下</span></span>
<span class="line"><span style="color:#C9D1D9;">  PackageConfig</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">packageConfig</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">PackageConfig</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  packageConfig.</span><span style="color:#D2A8FF;">setParent</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;com.sangeng.mp.generator&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// 包配置添加到 generator</span></span>
<span class="line"><span style="color:#C9D1D9;">  generator.</span><span style="color:#D2A8FF;">setPackageInfo</span><span style="color:#C9D1D9;">(packageConfig);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// 策略配置</span></span>
<span class="line"><span style="color:#C9D1D9;">  StrategyConfig</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">strategyConfig</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">StrategyConfig</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// 下划线驼峰命名转换</span></span>
<span class="line"><span style="color:#C9D1D9;">  strategyConfig.</span><span style="color:#D2A8FF;">setNaming</span><span style="color:#C9D1D9;">(NamingStrategy.underline_to_camel);</span></span>
<span class="line"><span style="color:#C9D1D9;">  strategyConfig.</span><span style="color:#D2A8FF;">setColumnNaming</span><span style="color:#C9D1D9;">(NamingStrategy.underline_to_camel);</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// 开启lombok</span></span>
<span class="line"><span style="color:#C9D1D9;">  strategyConfig.</span><span style="color:#D2A8FF;">setEntityLombokModel</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">true</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// 开启RestController</span></span>
<span class="line"><span style="color:#C9D1D9;">  strategyConfig.</span><span style="color:#D2A8FF;">setRestControllerStyle</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">true</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">  generator.</span><span style="color:#D2A8FF;">setStrategy</span><span style="color:#C9D1D9;">(strategyConfig);</span></span>
<span class="line"><span style="color:#C9D1D9;">  generator.</span><span style="color:#D2A8FF;">setTemplateEngine</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">FreemarkerTemplateEngine</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// 开始生成</span></span>
<span class="line"><span style="color:#C9D1D9;">  generator.</span><span style="color:#D2A8FF;">execute</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;"> }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h1 id="mybatisplus从入门到精通-高级篇" tabindex="-1">MybatisPlus从入门到精通-高级篇 <a class="header-anchor" href="#mybatisplus从入门到精通-高级篇" aria-hidden="true">#</a></h1><h2 id="_1-自动填充" tabindex="-1">1.自动填充 <a class="header-anchor" href="#_1-自动填充" aria-hidden="true">#</a></h2><p>​ 在实际项目中表会和我们的orders表一样，有<strong>更新时间，创建时间，创建人，更新人</strong>等字段。</p><p>​ 我们可以使用@TableFileld的fill属性来设置字段的自动填充。让我们能更方便的更新相关字段。</p><h3 id="示例-3" tabindex="-1">示例 <a class="header-anchor" href="#示例-3" aria-hidden="true">#</a></h3><p>①在对应字段上加上注解</p><p>​ 使用TableField注解的fill属性来标注哪些字段需要在自动填充，加了注解MP才会在对应的SQL中为我们预留字段。而属性值代表我们在什么进行什么操作时需预留的字段。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">/**</span></span>
<span class="line"><span style="color:#8B949E;"> * 更新时间</span></span>
<span class="line"><span style="color:#8B949E;"> */</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">TableField</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">fill</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> FieldFill.INSERT_UPDATE)</span></span>
<span class="line"><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> LocalDateTime</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">updateTime;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">/**</span></span>
<span class="line"><span style="color:#8B949E;"> * 创建时间</span></span>
<span class="line"><span style="color:#8B949E;"> */</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">TableField</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">fill</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> FieldFill.INSERT)</span></span>
<span class="line"><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> LocalDateTime</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">createTime;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>②自定义填充处理器 MetaObject</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Component</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">MyMetaObjectHandler</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">implements</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">MetaObjectHandler</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Override</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">insertFill</span><span style="color:#C9D1D9;">(MetaObject </span><span style="color:#FFA657;">metaObject</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">setFieldValByName</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;createTime&quot;</span><span style="color:#C9D1D9;">, LocalDateTime.</span><span style="color:#D2A8FF;">now</span><span style="color:#C9D1D9;">(),metaObject);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">setFieldValByName</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;updateTime&quot;</span><span style="color:#C9D1D9;">, LocalDateTime.</span><span style="color:#D2A8FF;">now</span><span style="color:#C9D1D9;">(),metaObject);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Override</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">updateFill</span><span style="color:#C9D1D9;">(MetaObject </span><span style="color:#FFA657;">metaObject</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">setFieldValByName</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;updateTime&quot;</span><span style="color:#C9D1D9;">, LocalDateTime.</span><span style="color:#D2A8FF;">now</span><span style="color:#C9D1D9;">(),metaObject);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_2-逻辑删除" tabindex="-1">2.逻辑删除 <a class="header-anchor" href="#_2-逻辑删除" aria-hidden="true">#</a></h2><p>​ MP也支持逻辑删除的处理。我们只需要配置好逻辑删除实体字段名，代表删除的字段值和代表未删除的字段值后即可。</p><p>​ 注意：如果3.3.0版本之前还需要在对应的字段上加上<code>@TableLogid</code>注解</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#7EE787;">mybatis-plus</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">global-config</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">db-config</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">logic-delete-field</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">delFlag</span><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;"># 全局逻辑删除的实体字段名(since 3.3.0,配置后可以忽略不配置步骤2)</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">logic-delete-value</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;"> </span><span style="color:#8B949E;"># 逻辑已删除值(默认为 1)</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">logic-not-delete-value</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;"> </span><span style="color:#8B949E;"># 逻辑未删除值(默认为 0)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_3-乐观锁" tabindex="-1">3.乐观锁 <a class="header-anchor" href="#_3-乐观锁" aria-hidden="true">#</a></h2><p>​ 并发操作时，我们需要保证对数据库的操作不发生冲突。乐观锁就是其中一种方式。乐观锁就是先加上不存在并发冲突问题，在进行实际数据操作的时候再检查是否发生冲突。</p><p>​ 我们再使用乐观锁时一般在表中增加一个version列。用来记录我们每天对记录操作的版本。每次对某条记录进行过操作时，对应的版本也需要+1.</p><p>​ 然后我们在每次要进行更新操作时，先查询对应数据的version值。在执行更新时，set version=老版本+1 where version = 老版本</p><p>​ 如果在查询老版本号到更新操作的中间时刻有其他人更新了这条数据，这样这次更新语句就会失败。</p><p>这里在更新时对version的操作如果我们自己做就会显得有点麻烦。所以MP提供了乐观锁插件。</p><p>​ 使用后我们就可以非常方便的实现对version的操作。</p><h3 id="_3-1-使用" tabindex="-1">3.1 使用 <a class="header-anchor" href="#_3-1-使用" aria-hidden="true">#</a></h3><p>① 配置对应的插件</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Configuration</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">MybatisPlusConfig</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#8B949E;">    /**</span></span>
<span class="line"><span style="color:#8B949E;">     * 旧版</span></span>
<span class="line"><span style="color:#8B949E;">     */</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Bean</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> OptimisticLockerInterceptor </span><span style="color:#D2A8FF;">optimisticLockerInterceptor</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">OptimisticLockerInterceptor</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#8B949E;">    /**</span></span>
<span class="line"><span style="color:#8B949E;">     * 新版</span></span>
<span class="line"><span style="color:#8B949E;">     */</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Bean</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> MybatisPlusInterceptor </span><span style="color:#D2A8FF;">mybatisPlusInterceptor</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        MybatisPlusInterceptor</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">mybatisPlusInterceptor</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">MybatisPlusInterceptor</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        mybatisPlusInterceptor.</span><span style="color:#D2A8FF;">addInnerInterceptor</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">OptimisticLockerInnerInterceptor</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> mybatisPlusInterceptor;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>②在实体类上加上注解</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">/**</span></span>
<span class="line"><span style="color:#8B949E;"> * 版本</span></span>
<span class="line"><span style="color:#8B949E;"> */</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Version</span></span>
<span class="line"><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Integer</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">version;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>③更新</p><p><strong>注意：在更新前我们一定要先查询到version设置到实体类上在进行更新才能生效</strong></p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">//test乐观锁</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">testVersion</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    QueryWrapper</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">Orders</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">queryWrapper</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> QueryWrapper&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">    queryWrapper.</span><span style="color:#D2A8FF;">eq</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">//查询id为3 的数据</span></span>
<span class="line"><span style="color:#C9D1D9;">    Orders</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">orders</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> ordersMapper.</span><span style="color:#D2A8FF;">selectOne</span><span style="color:#C9D1D9;">(queryWrapper);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">//对id为3的数据进行修改</span></span>
<span class="line"><span style="color:#C9D1D9;">    orders.</span><span style="color:#D2A8FF;">setPrice</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">88</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    ordersMapper.</span><span style="color:#D2A8FF;">updateById</span><span style="color:#C9D1D9;">(orders);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>这种情况下我们可以看到执行的sql已经发生了变化。</p><div class="language-txt line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#c9d1d9;">==&gt;  Preparing: UPDATE tb_orders SET price=?, remark=?, user_id=?, update_time=?, create_time=?, version=? WHERE id=? AND version=? AND del_flag=0</span></span>
<span class="line"><span style="color:#c9d1d9;">==&gt; Parameters: 88(Integer), 无(String), 2(Integer), 2022-07-07T13:43:46.198(LocalDateTime), 2021-08-24T21:03:41(LocalDateTime), 2(Integer), 3(Long), 1(Integer)</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-2-多插件配置问题" tabindex="-1">3.2 多插件配置问题 <a class="header-anchor" href="#_3-2-多插件配置问题" aria-hidden="true">#</a></h3><p>​ 我们在使用3.4.0版本以后的MP时，如果需要用到多个插件的话需要注意。在配置的时候只需要注入一个MybatisPlusInterceptor对象，把插件对象添加到MybatisPlusInterceptor 对象中即可。</p><p>​ 例如：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">    /**</span></span>
<span class="line"><span style="color:#8B949E;">     * 多插件配置</span></span>
<span class="line"><span style="color:#8B949E;">     * </span><span style="color:#FF7B72;">@return</span></span>
<span class="line"><span style="color:#8B949E;">     */</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Bean</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> MybatisPlusInterceptor </span><span style="color:#D2A8FF;">optimisticLockerInnerInterceptor</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        MybatisPlusInterceptor</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">mybatisPlusInterceptor</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">MybatisPlusInterceptor</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        mybatisPlusInterceptor.</span><span style="color:#D2A8FF;">addInnerInterceptor</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">PaginationInnerInterceptor</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">        mybatisPlusInterceptor.</span><span style="color:#D2A8FF;">addInnerInterceptor</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">OptimisticLockerInnerInterceptor</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> mybatisPlusInterceptor;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div>`,263),o=[e];function r(c,t,D,i,y,F){return a(),n("div",null,o)}const u=s(p,[["render",r]]);export{C as __pageData,u as default};
