<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mybatis-01 | LinDocs</title>
    <meta name="description" content="Vite & Vue powered static site generator.">
    <link rel="preload stylesheet" href="/lindocs/assets/style.3f977174.css" as="style">
    <link rel="modulepreload" href="/lindocs/assets/chunks/VPAlgoliaSearchBox.fa032c1e.js">
    <link rel="modulepreload" href="/lindocs/assets/app.66df897c.js">
    <link rel="modulepreload" href="/lindocs/assets/java_spring_Mybatis.md.b8883719.lean.js">
    
    <link rel="icon" href="./favicon.ico">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-8e0293cf data-v-2855b47a><!--[--><!--]--><!--[--><span tabindex="-1" data-v-59736647></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-59736647> Skip to content </a><!--]--><!----><header class="VPNav" data-v-2855b47a data-v-c96f2c5c><div class="VPNavBar has-sidebar" data-v-c96f2c5c data-v-fffd92b9><div class="container" data-v-fffd92b9><div class="VPNavBarTitle has-sidebar" data-v-fffd92b9 data-v-cca63090><a class="title" href="/lindocs/" data-v-cca63090><!--[--><!--]--><!----><!--[-->LinDocs<!--]--><!--[--><!--]--></a></div><div class="content" data-v-fffd92b9><!--[--><!--]--><div class="VPNavBarSearch search" data-v-fffd92b9 style="--65f62738:&#39;Meta&#39;;"><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-fffd92b9 data-v-28f09fbf><span id="main-nav-aria-label" class="visually-hidden" data-v-28f09fbf>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/lindocs/frontend/js/" data-v-28f09fbf data-v-985a9e89 data-v-87c72c21><!--[-->🎉前端<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/lindocs/database/mysql/mysql-base.html" data-v-28f09fbf data-v-985a9e89 data-v-87c72c21><!--[-->🔥数据库<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/lindocs/java/java-base.html" data-v-28f09fbf data-v-985a9e89 data-v-87c72c21><!--[-->🔥JAVA<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/lindocs/spring/springcloud/nacos.html" data-v-28f09fbf data-v-985a9e89 data-v-87c72c21><!--[-->🥳spring<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-fffd92b9 data-v-43fbcba2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-43fbcba2 data-v-3e5b53af data-v-4ca06f51><span class="check" data-v-4ca06f51><span class="icon" data-v-4ca06f51><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-3e5b53af><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-3e5b53af><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-fffd92b9 data-v-d03627c8 data-v-1b5b2373><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-1b5b2373><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-1b5b2373><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-1b5b2373><div class="VPMenu" data-v-1b5b2373 data-v-09926e5f><!----><!--[--><!--[--><!----><div class="group" data-v-d03627c8><div class="item appearance" data-v-d03627c8><p class="label" data-v-d03627c8>Appearance</p><div class="appearance-action" data-v-d03627c8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-d03627c8 data-v-3e5b53af data-v-4ca06f51><span class="check" data-v-4ca06f51><span class="icon" data-v-4ca06f51><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-3e5b53af><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-3e5b53af><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-fffd92b9 data-v-5dea55bf><span class="container" data-v-5dea55bf><span class="top" data-v-5dea55bf></span><span class="middle" data-v-5dea55bf></span><span class="bottom" data-v-5dea55bf></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-2855b47a data-v-54fccb40><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-54fccb40><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-54fccb40><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-54fccb40>Menu</span></button><a class="top-link" href="#" data-v-54fccb40> Return to top </a></div><aside class="VPSidebar" data-v-2855b47a data-v-284e079d><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-284e079d><span class="visually-hidden" id="sidebar-aria-label" data-v-284e079d> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-284e079d><section class="VPSidebarGroup" data-v-284e079d data-v-3f16556a><div class="title" data-v-3f16556a><h2 class="title-text" data-v-3f16556a>Java</h2><div class="action" data-v-3f16556a><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-3f16556a><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-3f16556a><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-3f16556a><!--[--><!--[--><a class="VPLink link link" href="/lindocs/java/java-base.html" style="padding-left:0px;" tabindex="-1" data-v-a61ef70d data-v-87c72c21><!--[--><span class="link-text" data-v-a61ef70d>java基础</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-284e079d><section class="VPSidebarGroup" data-v-284e079d data-v-3f16556a><div class="title" data-v-3f16556a><h2 class="title-text" data-v-3f16556a>Gradle</h2><div class="action" data-v-3f16556a><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-3f16556a><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-3f16556a><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-3f16556a><!--[--><!--[--><a class="VPLink link link" href="/lindocs/java/Gradle.html" style="padding-left:0px;" tabindex="-1" data-v-a61ef70d data-v-87c72c21><!--[--><span class="link-text" data-v-a61ef70d>Gradle</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-284e079d><section class="VPSidebarGroup" data-v-284e079d data-v-3f16556a><div class="title" data-v-3f16556a><h2 class="title-text" data-v-3f16556a>Spring全家桶</h2><div class="action" data-v-3f16556a><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-3f16556a><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-3f16556a><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-3f16556a><!--[--><!--[--><a class="VPLink link link" href="/lindocs/java/spring/springSecurityJwt.html" style="padding-left:0px;" tabindex="-1" data-v-a61ef70d data-v-87c72c21><!--[--><span class="link-text" data-v-a61ef70d>Spring Security ➕ JWT</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/lindocs/java/spring/Spring.html" style="padding-left:0px;" tabindex="-1" data-v-a61ef70d data-v-87c72c21><!--[--><span class="link-text" data-v-a61ef70d>SpringFrameword</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/lindocs/java/spring/SpringMVC.html" style="padding-left:0px;" tabindex="-1" data-v-a61ef70d data-v-87c72c21><!--[--><span class="link-text" data-v-a61ef70d>SpringMvc</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/lindocs/java/spring/SpringBoot.html" style="padding-left:0px;" tabindex="-1" data-v-a61ef70d data-v-87c72c21><!--[--><span class="link-text" data-v-a61ef70d>SpringBoot</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/lindocs/java/spring/SSM%E6%95%B4%E5%90%88.html" style="padding-left:0px;" tabindex="-1" data-v-a61ef70d data-v-87c72c21><!--[--><span class="link-text" data-v-a61ef70d>SSM整合</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link active" href="/lindocs/java/spring/Mybatis.html" style="padding-left:0px;" tabindex="-1" data-v-a61ef70d data-v-87c72c21><!--[--><span class="link-text" data-v-a61ef70d>Mybatis</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/lindocs/java/spring/MybatisPlus.html" style="padding-left:0px;" tabindex="-1" data-v-a61ef70d data-v-87c72c21><!--[--><span class="link-text" data-v-a61ef70d>MyBatis Plus</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-2855b47a data-v-a4e4f0b2><div class="VPDoc has-sidebar has-aside" data-v-a4e4f0b2 data-v-22d94e81><div class="container" data-v-22d94e81><div class="aside" data-v-22d94e81><div class="aside-curtain" data-v-22d94e81></div><div class="aside-container" data-v-22d94e81><div class="aside-content" data-v-22d94e81><div class="VPDocAside" data-v-22d94e81 data-v-8efc4ac7><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-8efc4ac7 data-v-a094936b><div class="content" data-v-a094936b><div class="outline-marker" data-v-a094936b></div><div class="outline-title" data-v-a094936b>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-a094936b><span class="visually-hidden" id="doc-outline-aria-label" data-v-a094936b> Table of Contents for current page </span><ul class="root" data-v-a094936b data-v-c6ed8bb7><!--[--><!--]--></ul></nav></div></div><!--[--><!--[--><!--[--><!--[--><div class="recommend-container" data-v-8e0293cf><p data-v-8e0293cf>扫码联系</p><p class="item-desc" data-v-8e0293cf>IT 咨询 &amp; 一起学习</p><img src="http://cdn.azhiyuan.com.cn/markdown/img/6593924985b60756ef48c391e43d48a.png" alt="前端" data-v-8e0293cf></div><!--]--><!--]--><!--]--><!--]--><div class="spacer" data-v-8efc4ac7></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-22d94e81><div class="content-container" data-v-22d94e81><!--[--><!--]--><main class="main" data-v-22d94e81><div style="position:relative;" class="vp-doc _lindocs_java_spring_Mybatis" data-v-22d94e81><div><h1 id="mybatis-01" tabindex="-1">Mybatis-01 <a class="header-anchor" href="#mybatis-01" aria-hidden="true">#</a></h1><h2 id="_1-框架" tabindex="-1">1.框架 <a class="header-anchor" href="#_1-框架" aria-hidden="true">#</a></h2><p>​ 框架相当于是一个脚手架，内部已经写好了很多代码，我们只要在其基础上进行开发就可以提高我们的开发效率。</p><p>框架阶段学习：</p><p>①先去学习如何使用框架</p><p>②然后在使用熟练的情况下去猜测内部的原理</p><p>③通过源码去验证自己的猜测。</p><h2 id="_2-mybatis介绍" tabindex="-1">2.Mybatis介绍 <a class="header-anchor" href="#_2-mybatis介绍" aria-hidden="true">#</a></h2><ul><li>MyBatis是一款优秀的持久层框架。</li><li>MyBatis免除了几乎所有的JDBC代码以及设置参数和获取结果集的工作。</li><li>官网<a href="https://mybatis.org/mybatis-3/zh/" target="_blank" rel="noreferrer">https://mybatis.org/mybatis-3/zh/</a>#</li></ul><h2 id="_3-快速入门" tabindex="-1">3.快速入门 <a class="header-anchor" href="#_3-快速入门" aria-hidden="true">#</a></h2><p>①数据准备</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">CREATE</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">DATABASE</span><span style="color:#C9D1D9;"> </span><span style="color:#8B949E;">/*!32312 IF NOT EXISTS*/</span><span style="color:#A5D6FF;">`mybatis_db`</span><span style="color:#C9D1D9;"> </span><span style="color:#8B949E;">/*!40100 DEFAULT CHARACTER SET utf8 */</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#FF7B72;">USE</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">`mybatis_db`</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#FF7B72;">DROP</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">TABLE</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">IF</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">EXISTS</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">`user`</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#FF7B72;">CREATE</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">TABLE</span><span style="color:#C9D1D9;"> `</span><span style="color:#D2A8FF;">user</span><span style="color:#C9D1D9;">` (</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">11</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">NOT NULL</span><span style="color:#C9D1D9;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`username`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">varchar</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">50</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`age`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">11</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`address`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">varchar</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">50</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">PRIMARY KEY</span><span style="color:#C9D1D9;"> (</span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">) ENGINE</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">InnoDB AUTO_INCREMENT</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> CHARSET</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">utf8;</span></span>
<span class="line"><span style="color:#FF7B72;">insert  into</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">`user`</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">`username`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">`age`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">`address`</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">values</span><span style="color:#C9D1D9;"> (</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;UZI&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">19</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;上海&#39;</span><span style="color:#C9D1D9;">),(</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;PDD&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">25</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;上海&#39;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>②导入依赖</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">&lt;!--mybatis依赖--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;org.mybatis&lt;/</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;mybatis&lt;/</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">&gt;3.5.9&lt;/</span><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">&lt;!--mysql驱动--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;mysql&lt;/</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;mysql-connector-java&lt;/</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">&gt;5.1.47&lt;/</span><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>③编写核心配置</p><p>在资源目录下创建：mybatis-config.xml 内容如下：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;?</span><span style="color:#7EE787;">xml</span><span style="color:#79C0FF;"> version</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;1.0&quot;</span><span style="color:#79C0FF;"> encoding</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;UTF-8&quot;</span><span style="color:#C9D1D9;"> ?&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;!</span><span style="color:#FF7B72;">DOCTYPE</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">configuration</span></span>
<span class="line"><span style="color:#C9D1D9;">        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">configuration</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">environments</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">default</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;development&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">environment</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;development&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">transactionManager</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;JDBC&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">dataSource</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;POOLED&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                &lt;</span><span style="color:#7EE787;">property</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;driver&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.mysql.jdbc.Driver&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                &lt;</span><span style="color:#7EE787;">property</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;url&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;jdbc:mysql://localhost:3306/test&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                &lt;</span><span style="color:#7EE787;">property</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;root&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                &lt;</span><span style="color:#7EE787;">property</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;password&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;123456&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;/</span><span style="color:#7EE787;">dataSource</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">environment</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">environments</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">mappers</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resource</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com/sangeng/dao/UserDao.xml&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">mappers</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">configuration</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>④定义接口及对应的xml映射文件</p><p>com.dunxi.dao.UserDao:</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">interface</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">UserDao</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    List&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">findAll</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>资源目录下：com/dunxi/dao/UserDao.xml</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;?</span><span style="color:#7EE787;">xml</span><span style="color:#79C0FF;"> version</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;1.0&quot;</span><span style="color:#79C0FF;"> encoding</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;UTF-8&quot;</span><span style="color:#C9D1D9;"> ?&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;!</span><span style="color:#FF7B72;">DOCTYPE</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">mapper</span></span>
<span class="line"><span style="color:#C9D1D9;">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">namespace</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.dao.UserDao&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findAll&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">      select * from user</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>⑤编写测试类</p><p>获取SqlSession,通过SqlSession获取UserDao调用对应的方法</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">static</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">main</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">String</span><span style="color:#C9D1D9;">[] args) throws IOException {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">//定义mybatis配置文件的路径</span></span>
<span class="line"><span style="color:#C9D1D9;">        String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">resource</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;mybatis-config.xml&quot;</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">        InputStream</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">inputStream</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> Resources.</span><span style="color:#D2A8FF;">getResourceAsStream</span><span style="color:#C9D1D9;">(resource);</span></span>
<span class="line"><span style="color:#C9D1D9;">        SqlSessionFactory</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">sqlSessionFactory</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">SqlSessionFactoryBuilder</span><span style="color:#C9D1D9;">().</span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">(inputStream);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">//获取Sqlsession对象</span></span>
<span class="line"><span style="color:#C9D1D9;">        SqlSession</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">sqlSession</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> sqlSessionFactory.</span><span style="color:#D2A8FF;">openSession</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">//获取UserDao实现类对象</span></span>
<span class="line"><span style="color:#C9D1D9;">        UserDao</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">userDao</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> sqlSession.</span><span style="color:#D2A8FF;">getMapper</span><span style="color:#C9D1D9;">(UserDao.class);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">//调用方法测试</span></span>
<span class="line"><span style="color:#C9D1D9;">        List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">userList</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userDao.</span><span style="color:#D2A8FF;">findAll</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(userList);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">//释放资源</span></span>
<span class="line"><span style="color:#C9D1D9;">        sqlSession.</span><span style="color:#D2A8FF;">close</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_3-9-高效编程" tabindex="-1">3.9 高效编程 <a class="header-anchor" href="#_3-9-高效编程" aria-hidden="true">#</a></h2><h3 id="_3-9-1-配置代码模板" tabindex="-1">3.9.1 配置代码模板 <a class="header-anchor" href="#_3-9-1-配置代码模板" aria-hidden="true">#</a></h3><p><img src="https://raw.githubusercontent.com/DunXi/zdx/main/img/202202191921677.png" alt="image-1"></p><h3 id="_3-9-2-mybatis插件" tabindex="-1">3.9.2 Mybatis插件 <a class="header-anchor" href="#_3-9-2-mybatis插件" aria-hidden="true">#</a></h3><p>Mybatis X 可以实现mapper和xml文件相互跳转</p><h2 id="_4-参数获取" tabindex="-1">4. 参数获取 <a class="header-anchor" href="#_4-参数获取" aria-hidden="true">#</a></h2><h3 id="_4-1-一个参数" tabindex="-1">4.1 一个参数 <a class="header-anchor" href="#_4-1-一个参数" aria-hidden="true">#</a></h3><h4 id="_4-1-1-基本参数" tabindex="-1">4.1.1 基本参数 <a class="header-anchor" href="#_4-1-1-基本参数" aria-hidden="true">#</a></h4><p>​ 我们可以使用#{}直接来取值，写任意名字都可以获取到参数。但是一般用方法的参数名来取。</p><p>例如：</p><p>接口中方法定义如下</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">User </span><span style="color:#D2A8FF;">findById</span><span style="color:#C9D1D9;">(Integer id);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>xml中内容如下：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> id</span><span style="color:#A5D6FF;">&quot;findById&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt; select * from user where id = #{id}&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_4-1-2-pojo" tabindex="-1">4.1.2 POJO <a class="header-anchor" href="#_4-1-2-pojo" aria-hidden="true">#</a></h4><p>​ 我们可以使用POJO中的属性名来获取对应的值。</p><p>例如：</p><p>接口中方法定义如下</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">User </span><span style="color:#D2A8FF;">findByUser</span><span style="color:#C9D1D9;">(User user);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>xml中内容如下：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findByUser&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.sangeng.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        select * from user where id = #{id} and username = #{username} and age = #{age} and address = #{address}</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_4-1-3-map" tabindex="-1">4.1.3 Map <a class="header-anchor" href="#_4-1-3-map" aria-hidden="true">#</a></h4><p>我们可以使用map中的key来获取对应的值。</p><p>例如：</p><p>接口中方法定义如下</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">User </span><span style="color:#D2A8FF;">findByMap</span><span style="color:#C9D1D9;">(Map map);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>xml中内容如下：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">&lt;</span><span style="color:#C9D1D9;">select id</span><span style="color:#FF7B72;">=</span><span style="color:#A5D6FF;">&quot;findByMap&quot;</span><span style="color:#C9D1D9;"> resultType</span><span style="color:#FF7B72;">=</span><span style="color:#A5D6FF;">&quot;com.sangeng.pojo.User&quot;</span><span style="color:#FF7B72;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        select </span><span style="color:#FF7B72;">*</span><span style="color:#C9D1D9;"> from user where id </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> #{id} and username </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> #{username} and age </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> #{age} and address </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> #{address}</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">&lt;/</span><span style="color:#C9D1D9;">select</span><span style="color:#FF7B72;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>方法调用：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">        Map</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">map</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">HashMap</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        map.</span><span style="color:#D2A8FF;">put</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        map.</span><span style="color:#D2A8FF;">put</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&quot;PDD&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        map.</span><span style="color:#D2A8FF;">put</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">25</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        map.</span><span style="color:#D2A8FF;">put</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;address&quot;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&quot;上海&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        userDao.</span><span style="color:#D2A8FF;">findByMap</span><span style="color:#C9D1D9;">(map);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_4-2-多个参数" tabindex="-1">4.2 多个参数 <a class="header-anchor" href="#_4-2-多个参数" aria-hidden="true">#</a></h3><p>Mybatis会把多个参数放入一个Map集合中，默认的key是argx和paramx这种格式。</p><p>例如：</p><p>接口中的方法定义如下</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">User </span><span style="color:#D2A8FF;">findByCondition</span><span style="color:#C9D1D9;">(Integer id,String username);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>最终map中的键值对如下：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">{arg1 </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> PDD,arg0 </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,param1 </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,param2 </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> PDD}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>​ 我们虽然可以使用对应的默认key来获取值，但是这种方式可读性不好。我们一般在方法前使用@param来设置参数名。</p><p>例如：</p><p>接口中的方法定义：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">User </span><span style="color:#D2A8FF;">findByCondition</span><span style="color:#C9D1D9;">(@</span><span style="color:#FF7B72;">Param</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">) Integer id,@</span><span style="color:#FF7B72;">Param</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;">) String username);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>最终map中的键值对如下：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">{id </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,Param1 </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,username </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> PDD,param2 </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> PDD}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>所以我们就可以使用如下方法来获取参数</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findByCondition&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    select * from user where id = #{id} and username = #{username}</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_4-3-总结" tabindex="-1">4.3 总结 <a class="header-anchor" href="#_4-3-总结" aria-hidden="true">#</a></h3><p>​ 建议如果只有一个参数的时候不用做什么特殊处理。如果是有多个参数的情况下一定要加上@Param来设置参数名。</p><h2 id="_5-核心类" tabindex="-1">5.核心类 <a class="header-anchor" href="#_5-核心类" aria-hidden="true">#</a></h2><h3 id="_5-1-sqlsessionfactory" tabindex="-1">5.1 SQLSessionFactory <a class="header-anchor" href="#_5-1-sqlsessionfactory" aria-hidden="true">#</a></h3><p>SqlSessionFactory是一个SqlSession的工厂类。主要用来获取SqlSession对象。</p><p>成员方法如下</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">SqlSession </span><span style="color:#D2A8FF;">openSession</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#8B949E;">//获取SqlSession对象，传入的参数代表创建的SqlSession是否自动提交</span></span>
<span class="line"><span style="color:#C9D1D9;">SqlSession </span><span style="color:#D2A8FF;">openSession</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">boolean</span><span style="color:#C9D1D9;"> autoCommit);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-2-sqlsession" tabindex="-1">5.2 SqlSession <a class="header-anchor" href="#_5-2-sqlsession" aria-hidden="true">#</a></h3><p>​ SqlSession提供了在数据库执行SQL命令所需要的所有方法。它还提供了事物的相关操作。</p><p>成员方法如下：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">T </span><span style="color:#D2A8FF;">getMapper</span><span style="color:#C9D1D9;">(Class</span><span style="color:#FF7B72;">&lt;</span><span style="color:#C9D1D9;">T</span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;"> type);</span><span style="color:#8B949E;">//获取mapper对象</span></span>
<span class="line"><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">commit</span><span style="color:#C9D1D9;">();</span><span style="color:#8B949E;">//提交事务</span></span>
<span class="line"><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">rollback</span><span style="color:#C9D1D9;">();</span><span style="color:#8B949E;">//回滚事务</span></span>
<span class="line"><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">close</span><span style="color:#C9D1D9;">();</span><span style="color:#8B949E;">//释放资源</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_6-mybatis实现增删改查" tabindex="-1">6.Mybatis实现增删改查 <a class="header-anchor" href="#_6-mybatis实现增删改查" aria-hidden="true">#</a></h2><h3 id="_6-1-新增" tabindex="-1">6.1 新增 <a class="header-anchor" href="#_6-1-新增" aria-hidden="true">#</a></h3><p>①接口中的实现方法</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">insertUser</span><span style="color:#C9D1D9;">(User user);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>②映射文件UserDao.xml增加相应的标签</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">insert</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;"> = </span><span style="color:#A5D6FF;">&quot;insertUser&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;"> insert into user values(null,k#{username},#{age},#{address})</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">insert</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>注意：一定要记得提交事务</strong></p><h3 id="_6-2-删除" tabindex="-1">6.2 删除 <a class="header-anchor" href="#_6-2-删除" aria-hidden="true">#</a></h3><p>①接口中增加相关方法</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">deleteById</span><span style="color:#C9D1D9;">(Integer id);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>②映射文件UserDao.xml增加响应的标签</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">delete</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;"> = </span><span style="color:#A5D6FF;">&quot;deleteById&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;"> delete from user where id = #{id}</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">delete</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>注意：一定要记得提交事务。</strong></p><h3 id="_6-3-修改" tabindex="-1">6.3 修改 <a class="header-anchor" href="#_6-3-修改" aria-hidden="true">#</a></h3><p>①接口中增加相关方法</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">updateUser</span><span style="color:#C9D1D9;">(User user);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>②映射文件UserDao.xml增加响应的标签</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">&lt;!--更新用户--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">update</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;"> =</span><span style="color:#A5D6FF;">&quot;updateUser&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;"> UPDATE USER SET age = #{age} , username = #{username},address = #{address} WHERE id = #{id}</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">update</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>注意：一定要记得提交事务。</strong></p><h3 id="_6-4-根据id查询" tabindex="-1">6.4 根据id查询 <a class="header-anchor" href="#_6-4-根据id查询" aria-hidden="true">#</a></h3><p>①接口中增加相关方法</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">User </span><span style="color:#D2A8FF;">findById</span><span style="color:#C9D1D9;">(Integer id);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>②映射文件UserDao.xml增加响应的标签</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findById&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;"> select * from user where id =#{id}</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_6-5-查询所有" tabindex="-1">6.5 查询所有 <a class="header-anchor" href="#_6-5-查询所有" aria-hidden="true">#</a></h3><p>①接口中增加相关方法</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">List</span><span style="color:#FF7B72;">&lt;</span><span style="color:#C9D1D9;">User</span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">findAll</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>②映射文件UserDao.xml增加响应的标签</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findAll&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;"> select * from user</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_7-配置文件详解" tabindex="-1">7.配置文件详解 <a class="header-anchor" href="#_7-配置文件详解" aria-hidden="true">#</a></h2><h3 id="_7-1-properties" tabindex="-1">7.1 properties <a class="header-anchor" href="#_7-1-properties" aria-hidden="true">#</a></h3><p>​ 可以使用properties读取properties配置文件。使用其中的resource属性来设置配置文件的路径。然后使用${key}来获取配置文件中的值</p><p>例如：</p><p>在resources目录下有jdbc.properties文件，内容如下</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark"><code><span class="line"><span style="color:#c9d1d9;">jdbc.url=jdbc:mysql://localhost:3306/mybatis_db</span></span>
<span class="line"><span style="color:#c9d1d9;">jdbc.driver=com.mysql.jdbc.Driver</span></span>
<span class="line"><span style="color:#c9d1d9;">jdbc.username=root</span></span>
<span class="line"><span style="color:#c9d1d9;">jdbc.password=123456</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在mybatis-config.xml中：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;?</span><span style="color:#7EE787;">xml</span><span style="color:#79C0FF;"> version</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;1.0&quot;</span><span style="color:#79C0FF;"> encoding</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;UTF-8&quot;</span><span style="color:#C9D1D9;"> ?&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;!</span><span style="color:#FF7B72;">DOCTYPE</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">configuration</span></span>
<span class="line"><span style="color:#C9D1D9;">        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">configuration</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">&lt;!--properties要在environments的前面，设置配置文件所在的路径--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">properties</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resource</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;jdbc.properties&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">properties</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">environments</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">default</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;development&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">environment</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;development&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">transactionManager</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;JDBC&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">dataSource</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;POOLED&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#8B949E;">&lt;!--获取配置文件中对应的值来设置连接相关参数--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                &lt;</span><span style="color:#7EE787;">property</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;driver&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;${jdbc.driver}&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                &lt;</span><span style="color:#7EE787;">property</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;url&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;${jdbc.url}&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                &lt;</span><span style="color:#7EE787;">property</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;${jdbc.username}&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                &lt;</span><span style="color:#7EE787;">property</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;password&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;${jdbc.password}&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;/</span><span style="color:#7EE787;">dataSource</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">environment</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">environments</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">mappers</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resource</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com/dunxi/dao/UserDao.xml&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">mappers</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">configuration</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="_7-2-settings" tabindex="-1">7.2 settings <a class="header-anchor" href="#_7-2-settings" aria-hidden="true">#</a></h3><p>​ 可以使用该标签来进行一些设置</p><p>例如：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">settings</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">&lt;!--开启自动驼峰命名映射--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">setting</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;mapUnderscoreToCamelCase&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;true&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">settings</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>具体的设置参考：<a href="https://mybatis.org/mybatis-3/zh/configuration.html#settings" target="_blank" rel="noreferrer">https://mybatis.org/mybatis-3/zh/configuration.html#settings</a></p><h3 id="_7-3-typealiases" tabindex="-1">7.3 typeAliases <a class="header-anchor" href="#_7-3-typealiases" aria-hidden="true">#</a></h3><p>​ 可以用来设置给全类名设置别名，简化书写。一般设置一个包下的类全部有默认别名。莫默认别名是类名首字母小写。例如：com.dunxi.pojo.User别名为user</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark"><code><span class="line"><span style="color:#c9d1d9;">&lt;typeAliases&gt;</span></span>
<span class="line"><span style="color:#c9d1d9;"> &lt;package name=&quot;com.dunxi.dao&quot;&gt;&lt;/package&gt;</span></span>
<span class="line"><span style="color:#c9d1d9;">&lt;/typeAliases&gt;</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_7-4-environments" tabindex="-1">7.4 environments <a class="header-anchor" href="#_7-4-environments" aria-hidden="true">#</a></h3><p>​ 配置数据库相关的环境，例如事务管理器，连接池相关参数等。</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">&lt;!--设置默认环境--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;"> &lt;</span><span style="color:#7EE787;">environments</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">default</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;development&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">&lt;!--设置该环境的唯一标识--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">environment</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;development&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">transactionManager</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;JDBC&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">dataSource</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;POOLED&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#8B949E;">&lt;!--获取配置文件中对应的值来设置连接相关参数--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                &lt;</span><span style="color:#7EE787;">property</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;driver&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;${jdbc.driver}&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                &lt;</span><span style="color:#7EE787;">property</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;url&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;${jdbc.url}&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                &lt;</span><span style="color:#7EE787;">property</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;${jdbc.username}&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                &lt;</span><span style="color:#7EE787;">property</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;password&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;${jdbc.password}&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;/</span><span style="color:#7EE787;">dataSource</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">environment</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">environments</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_7-5-mappers" tabindex="-1">7.5 mappers <a class="header-anchor" href="#_7-5-mappers" aria-hidden="true">#</a></h3><p>​ 该标签的作用是加载映射的，加载方式有如下几种（<strong>主要使用的是第四种</strong>）：</p><p>​ ①使用相对于类名路径的资源引用，例如：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">&lt;!-- 使用相对于类路径的资源引用 --&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">mappers</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">  &lt;</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resource</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;org/mybatis/builder/AuthorMapper.xml&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">  &lt;</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resource</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;org/mybatis/builder/BlogMapper.xml&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">  &lt;</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resource</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;org/mybatis/builder/PostMapper.xml&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">mappers</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>②使用完全限定资源定位符（URL），例如：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">&lt;!-- 使用完全限定资源定位符（URL） --&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">mappers</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">  &lt;</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">url</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;file:///var/mappers/AuthorMapper.xml&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">  &lt;</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">url</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;file:///var/mappers/BlogMapper.xml&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">  &lt;</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">url</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;file:///var/mappers/PostMapper.xml&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">mappers</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>③使用映射器接口实现类的完全限定类名，例如：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">&lt;!-- 使用映射器接口实现类的完全限定类名 --&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">mappers</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">  &lt;</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">class</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;org.mybatis.builder.AuthorMapper&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">  &lt;</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">class</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;org.mybatis.builder.BlogMapper&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">  &lt;</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">class</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;org.mybatis.builder.PostMapper&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">mappers</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>④将包内的映射器接口实现全部注册为映射器，例如：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">&lt;!-- 定义dao接口所在的包.要求xml文件存放的路径和dao接口的包名要对应！ --&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">mappers</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">  &lt;</span><span style="color:#7EE787;">package</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;org.mybatis.builder&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">mappers</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_8-打印日志" tabindex="-1">8.打印日志 <a class="header-anchor" href="#_8-打印日志" aria-hidden="true">#</a></h2><p>①log4j配置 在resources目录下创建log4j.properties文件，内容如下：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark"><code><span class="line"><span style="color:#c9d1d9;">### direct log messages to stdout ###</span></span>
<span class="line"><span style="color:#c9d1d9;">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span></span>
<span class="line"><span style="color:#c9d1d9;">log4j.appender.stdout.Target=System.out</span></span>
<span class="line"><span style="color:#c9d1d9;">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span></span>
<span class="line"><span style="color:#c9d1d9;">log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span>
<span class="line"><span style="color:#c9d1d9;">### direct messages to file mylog.log ###</span></span>
<span class="line"><span style="color:#c9d1d9;">log4j.appender.file=org.apache.log4j.FileAppender</span></span>
<span class="line"><span style="color:#c9d1d9;">log4j.appender.file.File=c:/mylog.log</span></span>
<span class="line"><span style="color:#c9d1d9;">log4j.appender.file.layout=org.apache.log4j.PatternLayout</span></span>
<span class="line"><span style="color:#c9d1d9;">log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span>
<span class="line"><span style="color:#c9d1d9;">### set log levels - for more verbose logging change &#39;info&#39; to &#39;debug&#39; ###</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span>
<span class="line"><span style="color:#c9d1d9;">log4j.rootLogger=debug, stdout</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>②引入依赖</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;log4j&lt;/</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;log4j&lt;/</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">&gt;1.2.17&lt;/</span><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_9-获取参数时-和-的区别-面试问题" tabindex="-1">9.获取参数时#{}和${}的区别（面试问题） <a class="header-anchor" href="#_9-获取参数时-和-的区别-面试问题" aria-hidden="true">#</a></h2><p>​ 如果使用#{}他是预编译的sql可以防止SQL注入攻击</p><p>​ 如果使用${}他是直接把参数值拿来进行拼接，这样会有SQL注入的风险</p><p>如果使用的是#{}来获取参数值日志如下：</p><p>Preparing: select * from user where id = ? and username = ? and age = ? and address = ?</p><p>Parameters:2(Integer)快乐风男(String),29(Integer),北京(String)</p><p>如果使用${}来获取参数值日志如下：</p><p>Preparing: select * from user where id = 2 and username = 快乐风男 and age = 29 and address = 北京</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;"> //使用$符号进行查询操作，拼接式的查找，引号里面的值会被自动解析出来，以至于把值当成是列来查找，所以会报错，而且会有被SQL注入的风险，不建议使用这种方式</span></span>
<span class="line"><span style="color:#C9D1D9;">--select * from user where id = ${id} and username = ${username} and age = ${age} and address = ${address}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>$</code> 符号大括号可以用来动态变换表名，提供给管理员来使用，不要提供给普通用户来使用，不然还是会有SQL注入的风险的。</p><h2 id="mybatis-02" tabindex="-1">Mybatis-02 <a class="header-anchor" href="#mybatis-02" aria-hidden="true">#</a></h2><h2 id="_1-注解开发" tabindex="-1">1.注解开发 <a class="header-anchor" href="#_1-注解开发" aria-hidden="true">#</a></h2><p>​ 我们也可以使用注解的形式来进行开发，用注解来替换掉xml。使用注解来映射简单语句会使代码显得更加简洁，但对于稍微复杂的语句，Java注解不仅力不从心，还会让你本就复杂的SQL语句更加混乱不堪。所以我们在实际企业开发中一般都是使用xml的形式。</p><h3 id="_1-1-步骤" tabindex="-1">1.1 步骤 <a class="header-anchor" href="#_1-1-步骤" aria-hidden="true">#</a></h3><p>①在核心配置文件中配置mapper接口所在的包名</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">mappers</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">  &lt;</span><span style="color:#7EE787;">package</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.dao&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">package</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">mappers</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>②在接口对应方法上使用注解来配置需要执行的SQL</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">interface</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">UserDao</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Select</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;select * from user&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    List&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">findAll</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Select</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;select * from user where id = 2&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    User </span><span style="color:#D2A8FF;">findUser</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Select</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;select * from user where id = #{id}&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    User </span><span style="color:#D2A8FF;">findById</span><span style="color:#C9D1D9;">(Integer </span><span style="color:#FFA657;">id</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Select</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;select * from user where id = #{id} and username = #{username} and age = #{age} and address = #{address}&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    User </span><span style="color:#D2A8FF;">findByUser</span><span style="color:#C9D1D9;">(User </span><span style="color:#FFA657;">user</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Select</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;select * from user where id = #{id} and username = #{username} and age = #{age} and address = #{address}&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    User </span><span style="color:#D2A8FF;">findByMap</span><span style="color:#C9D1D9;">(Map </span><span style="color:#FFA657;">map</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    User </span><span style="color:#D2A8FF;">findByCondition</span><span style="color:#C9D1D9;">(@</span><span style="color:#FF7B72;">Param</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">) Integer </span><span style="color:#FFA657;">id</span><span style="color:#C9D1D9;">,@</span><span style="color:#FF7B72;">Param</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;">) String </span><span style="color:#FFA657;">username</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">//新增数据</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Insert</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;insert into user values(null,#{username},#{age},#{address})&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">insertUser</span><span style="color:#C9D1D9;">(User </span><span style="color:#FFA657;">user</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">//删除数据</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Delete</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;delete from user where id = #{id}&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">deleteById</span><span style="color:#C9D1D9;">(Integer </span><span style="color:#FFA657;">id</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">//修改数据</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Update</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;UPDATE USER SET username = #{username},age = #{age},address=#{address} where id = #{id}s&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">updateUser</span><span style="color:#C9D1D9;">(User </span><span style="color:#FFA657;">user</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>③和之前的一样获取Mapper调用方法即可</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">static</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">main</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">String</span><span style="color:#C9D1D9;">[] args) throws IOException {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">//定义mybatis配置文件的路径</span></span>
<span class="line"><span style="color:#C9D1D9;">        String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">resource</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;mybatis-config.xml&quot;</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">        InputStream</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">inputStream</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> Resources.</span><span style="color:#D2A8FF;">getResourceAsStream</span><span style="color:#C9D1D9;">(resource);</span></span>
<span class="line"><span style="color:#C9D1D9;">        SqlSessionFactory</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">sqlSessionFactory</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">SqlSessionFactoryBuilder</span><span style="color:#C9D1D9;">().</span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">(inputStream);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">//获取Sqlsession对象</span></span>
<span class="line"><span style="color:#C9D1D9;">        SqlSession</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">sqlSession</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> sqlSessionFactory.</span><span style="color:#D2A8FF;">openSession</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">//获取UserDao实现类对象</span></span>
<span class="line"><span style="color:#C9D1D9;">        UserDao</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">userDao</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> sqlSession.</span><span style="color:#D2A8FF;">getMapper</span><span style="color:#C9D1D9;">(UserDao.class);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">//调用方法测试</span></span>
<span class="line"><span style="color:#C9D1D9;">        List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">userList</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userDao.</span><span style="color:#D2A8FF;">findAll</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(userList);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">//释放资源</span></span>
<span class="line"><span style="color:#C9D1D9;">        sqlSession.</span><span style="color:#D2A8FF;">close</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h1 id="_2-动态sql" tabindex="-1">2.动态SQL <a class="header-anchor" href="#_2-动态sql" aria-hidden="true">#</a></h1><p>​ 在实际开发中的SQL语句没有之前那么简单，很多时候需要根据传入的参数情况动态生成SQL语句。Mybatis提供了动态SQL相关的标签让我们使用。</p><h3 id="_2-1-if" tabindex="-1">2.1 if <a class="header-anchor" href="#_2-1-if" aria-hidden="true">#</a></h3><p>​ 可以使用if标签进行条件判断，条件成立才会把if标签中的内容拼接到SQL语句中。</p><p>例如：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findByCondition&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    select * from user where id = #{id}</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">test</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username!=null&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        and username = #{username}</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p id="">如果参数username为null则执行sql为：select * from user where id = #</p><p username="">如果参数username为null则执行sql为：select * from user where id = #{id} and username = #</p><p><strong>注意：在test属性中表示参数的时候不需要写#{},写了会出问题。</strong></p><h3 id="_2-2-trim" tabindex="-1">2.2 trim <a class="header-anchor" href="#_2-2-trim" aria-hidden="true">#</a></h3><p>​ 可以使用该标签动态的添加前缀或后缀，也可以使用该标签动态的消除前缀。</p><p>2.2.1prefixOverrides属性</p><p>​ 用来设置需要被清除的前缀，多个值可以用|分隔，注意|前后不要有空格。例如:and|or</p><p>例如：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findByCondition&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;con.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;"> select * from user</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">trim</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">prefixOverrides</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;and|or&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        and</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">trim</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>最终执行的sql为： select * from user</p><h3 id="_2-2-2-suffixoverrides属性" tabindex="-1">2.2.2 suffixOverrides属性 <a class="header-anchor" href="#_2-2-2-suffixoverrides属性" aria-hidden="true">#</a></h3><p>​ 用来设置需要被清除的后缀，多个值可以用|分隔，注意|前后不要有空格。例如：and|or</p><p>例如：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findByCondition&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;"> select * from user</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">trim</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">suffixOverrides</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;and|or&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">     id = #{id} and</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">trim</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>最终执行的SQL为: select * from user 去掉了后缀and</p><h3 id="_2-2-3prefix属性" tabindex="-1">2.2.3prefix属性 <a class="header-anchor" href="#_2-2-3prefix属性" aria-hidden="true">#</a></h3><p>​ 用来设置动态添加的前缀，如果标签中有内容就会添加上设置的前缀，如果标签中没有内容就不会添加上设置的前缀</p><p>例如：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findBYCondition&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;"> select * from user</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">trim</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">prefix</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;where&quot;</span><span style="color:#C9D1D9;"> &gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">     1=1</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">trim</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>最终执行的SQL为：select * from user where 1= 1 动态增加了前缀where</p><h3 id="_2-2-4suffix属性" tabindex="-1">2.2.4suffix属性 <a class="header-anchor" href="#_2-2-4suffix属性" aria-hidden="true">#</a></h3><p>​ 用来设置动态添加的后缀，如果标签中有内容就会添加上设置的后缀，如果标签中没有内容就不会添加上设置的后缀</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findBYCondition&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;"> select * from user</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">trim</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">suffix</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;1=1&quot;</span><span style="color:#C9D1D9;"> &gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">     where</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">trim</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>最终执行的SQL为：select * from user where 1=1 动态增加了后缀1=1</p><p>2.2.5 动态添加前缀where并且消除and或者or</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">User </span><span style="color:#D2A8FF;">findByCondition</span><span style="color:#C9D1D9;">(@</span><span style="color:#FF7B72;">Param</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">) Integer id,@</span><span style="color:#FF7B72;">Param</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;">) String username);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findByCondition&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    select * from user</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">trim</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">prefix</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;where&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">prefixOverrides</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;and|or&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">test</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id!=null&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            id = #{id}</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">test</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username!=null&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            username = #{username}</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">trim</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>调用方法的时候如果传入的id和username为null则SQL为： <strong>select * from user</strong></p><p>调用方法的时候如果传入的id为null，username不为null，则执行的SQL为: <strong>select * from user where username = ?</strong></p><h3 id="_2-2-where" tabindex="-1">2.2 where <a class="header-anchor" href="#_2-2-where" aria-hidden="true">#</a></h3><p>​ where标签等价于：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">trim</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">prefix</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;where&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">prefixOverrides</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;and|or&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">trim</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>​ 可以使用where标签动态的拼接where并且去处前缀的and或者or。</p><p>例如：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">User </span><span style="color:#D2A8FF;">findByCondition</span><span style="color:#C9D1D9;">(@</span><span style="color:#FF7B72;">Param</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">) Integer id,@</span><span style="color:#FF7B72;">Param</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;">) String username);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findByCondition&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        select * from user</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">where</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">test</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id!=null&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                id = #{id}</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;/</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">test</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username!=null&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                username = #{username}</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;/</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">where</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>调用方法的时候如果传入的id和username为null则SQL为： <strong>select * from user</strong></p><p>调用方法的时候如果传入的id为null，username不为null，则执行的SQL为: <strong>select * from user where username = ?</strong></p><h3 id="_2-3-set" tabindex="-1">2.3 set <a class="header-anchor" href="#_2-3-set" aria-hidden="true">#</a></h3><p>​ set标签等价于</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">trim</span><span style="color:#C9D1D9;"> prefix</span><span style="color:#A5D6FF;">&quot;set&quot;</span><span style="color:#C9D1D9;"> suffixOverrides</span><span style="color:#A5D6FF;">&quot;,&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">trim</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>​ 可以使用set标签动态的拼接set并且去处后缀的逗号。</p><p>例如：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">update</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;updateUser&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    UPDATE USER</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">set</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">test</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username!=null&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            username = #{username},</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">test</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;age!=null&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            age = #{age},</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">test</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;address!=null&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            address=#{address},</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">if</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">set</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    where id = #{id}</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">update</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>如果调用方法时传入的User对象的id为2，username不为null，其他属性都为null则最终执行的SQL为：update user set username = ? where id = ?</p><h3 id="_2-4-foreach" tabindex="-1">2.4 foreach <a class="header-anchor" href="#_2-4-foreach" aria-hidden="true">#</a></h3><p>​ 可以使用foreach标签遍历集合或者数组类型的参数，获取其中元素拿来动态的拼接SQL语句。</p><p>例如：</p><p>方法定义如下</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">List</span><span style="color:#FF7B72;">&lt;</span><span style="color:#C9D1D9;">User</span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">findByIds</span><span style="color:#C9D1D9;">(@</span><span style="color:#FF7B72;">Param</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;ids&quot;</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">Integer</span><span style="color:#C9D1D9;">[] ids);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>如果期望动态的根据世纪传入的数组的长度拼接SQL语句。例如传入长度为4个数组最终执行的SQL语句为：</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">*</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> User </span><span style="color:#FF7B72;">where</span><span style="color:#C9D1D9;"> id </span><span style="color:#FF7B72;">in</span><span style="color:#C9D1D9;">(? , ? , ? , ?)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>则在xml映射文件中可以使用以下方法</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findByIds&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    select * from User</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">where</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">&lt;!--        集合             刚开始要拼接的字段    结束        名字       分隔符--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">foreach</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">collection</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;ids&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">open</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id in(&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">close</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;)&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">item</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">separator</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;,&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            #{id}</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">foreach</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">where</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>cllection:表示遍历的参数。</strong></p><p><strong>open:表示遍历开始时拼接的语句</strong></p><p><strong>item：表示给当前遍历到的元素取的名字</strong></p><p><strong>separator：表示每遍历完一次拼接的分隔符</strong></p><p><strong>close：表示最后一次遍历完拼接的语句</strong></p><p><strong>注意：如果方法参数是数组类型，默认的参数名是array，如果方法参数是list集合默认参数名是list。建议遇到数组或者集合类型的参数统一使用@Param注解进行命名。</strong></p><h3 id="_2-5-choose、when、otherwise" tabindex="-1">2.5 choose、when、otherwise <a class="header-anchor" href="#_2-5-choose、when、otherwise" aria-hidden="true">#</a></h3><p>​ 当我们不想使用所有的条件，而只是想从多个条件中选择一个使用时。可以使用shoose系列标签。类似于java中的switch。</p><p>例如：</p><p>接口类中方法定义如下</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">LIst</span><span style="color:#FF7B72;">&lt;</span><span style="color:#C9D1D9;">User</span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">selectChose</span><span style="color:#C9D1D9;">(User user)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>期望：</p><p>​ 如果user对象的id不为空时就通过id查询。</p><p>​ 如果id为null，username不为null就通过username查询。</p><p>​ 如果id和username都为null就查询id为3的用户。</p><p>xml映射文件如下：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;selectChose&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    select * from user</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">where</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">choose</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">when</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">test</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id!=null&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                id = #{id}</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;/</span><span style="color:#7EE787;">when</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">when</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">test</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username!=null&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">               username = #{username}</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;/</span><span style="color:#7EE787;">when</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">otherwise</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">                id = 3</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;/</span><span style="color:#7EE787;">otherwise</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">choose</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">where</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li><p><strong>choose类似于java中的switch</strong></p></li><li><p><strong>when类似于java中的case</strong></p></li><li><p><strong>otherwise类似于java中的default</strong></p><p>一个choose标签中最多只会有一个when中的判断成立。从上到下去进行判断。如果成立了就把标签体的内容拼接到SQL中，并且不会进行其他when的判断和拼接。如果所有的when都不成立则拼接otherwise中的语句。</p></li></ul><h2 id="_3-sql片段抽取" tabindex="-1">3.SQL片段抽取 <a class="header-anchor" href="#_3-sql片段抽取" aria-hidden="true">#</a></h2><p>​ 我们在xml映射文件中编写SQL语句的时候可能会遇到重复的SQL片段。这种SQL片段我们可以使用SQL标签来进行抽取。然后在需要使用的时候用include标签进行使用。</p><p>例如：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">sql</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;baseSelect&quot;</span><span style="color:#C9D1D9;">&gt;id,username,age,address&lt;/</span><span style="color:#7EE787;">sql</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findAll&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    select &lt;</span><span style="color:#7EE787;">include</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">refid</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;baseSelect&quot;</span><span style="color:#C9D1D9;">/&gt; from user</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>最终执行的SQL为：select id,username,age,address from user</strong></p><h1 id="mybatis-03" tabindex="-1">Mybatis-03 <a class="header-anchor" href="#mybatis-03" aria-hidden="true">#</a></h1><h2 id="_0-案例环境" tabindex="-1">0. 案例环境 <a class="header-anchor" href="#_0-案例环境" aria-hidden="true">#</a></h2><h3 id="_0-1-案例数据初始化sql" tabindex="-1">0.1 案例数据初始化sql <a class="header-anchor" href="#_0-1-案例数据初始化sql" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">CREATE</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">DATABASE</span><span style="color:#C9D1D9;"> </span><span style="color:#8B949E;">/*!32312 IF NOT EXISTS*/</span><span style="color:#A5D6FF;">`mybatis_db`</span><span style="color:#C9D1D9;"> </span><span style="color:#8B949E;">/*!40100 DEFAULT CHARACTER SET utf8 */</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">USE</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">`mybatis_db`</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#FF7B72;">DROP</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">TABLE</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">IF</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">EXISTS</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">`orders`</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#FF7B72;">CREATE</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">TABLE</span><span style="color:#C9D1D9;"> `</span><span style="color:#D2A8FF;">orders</span><span style="color:#C9D1D9;">` (</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">11</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">NOT NULL</span><span style="color:#C9D1D9;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`createtime`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">timestamp</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NOT NULL</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> CURRENT_TIMESTAMP </span><span style="color:#FF7B72;">ON</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">UPDATE</span><span style="color:#C9D1D9;"> CURRENT_TIMESTAMP COMMENT </span><span style="color:#A5D6FF;">&#39;创建时间&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`price`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">11</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;价格&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`remark`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">varchar</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">100</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;备注&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`user_id`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">11</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;用户id&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">PRIMARY KEY</span><span style="color:#C9D1D9;"> (</span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">) ENGINE</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">InnoDB AUTO_INCREMENT</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">4</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> CHARSET</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">utf8;</span></span>
<span class="line"><span style="color:#FF7B72;">insert  into</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">`orders`</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">`createtime`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">`price`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">`remark`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">`user_id`</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">values</span><span style="color:#C9D1D9;"> (</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;2014-06-26 16:55:43&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">2000</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;无&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">),(</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;2021-02-23 16:55:57&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">3000</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;无&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">),(</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;2021-02-23 16:56:21&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">4000</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;无&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#FF7B72;">DROP</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">TABLE</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">IF</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">EXISTS</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">`role`</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">CREATE</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">TABLE</span><span style="color:#C9D1D9;"> `</span><span style="color:#D2A8FF;">role</span><span style="color:#C9D1D9;">` (</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">11</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">NOT NULL</span><span style="color:#C9D1D9;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`name`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">varchar</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">100</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;角色名&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`desc`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">varchar</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">100</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;"> COMMENT </span><span style="color:#A5D6FF;">&#39;角色描述&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">PRIMARY KEY</span><span style="color:#C9D1D9;"> (</span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">) ENGINE</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">InnoDB AUTO_INCREMENT</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> CHARSET</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">/*Data for the table `role` */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">insert  into</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">`role`</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">`name`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">`desc`</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">values</span><span style="color:#C9D1D9;"> (</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;总经理&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;一人之下&#39;</span><span style="color:#C9D1D9;">),(</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;CFO&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">/*Table structure for table `user` */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">DROP</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">TABLE</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">IF</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">EXISTS</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">`user`</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">CREATE</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">TABLE</span><span style="color:#C9D1D9;"> `</span><span style="color:#D2A8FF;">user</span><span style="color:#C9D1D9;">` (</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">11</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">NOT NULL</span><span style="color:#C9D1D9;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`username`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">varchar</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">50</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`age`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">11</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`address`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">varchar</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">50</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">PRIMARY KEY</span><span style="color:#C9D1D9;"> (</span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">) ENGINE</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">InnoDB AUTO_INCREMENT</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">33</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> CHARSET</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">/*Data for the table `user` */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">insert  into</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">`user`</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">`username`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">`age`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">`address`</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">values</span><span style="color:#C9D1D9;"> (</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;pdd&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">26</span><span style="color:#C9D1D9;">,</span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">),(</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;UZI&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">19</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;上海11&#39;</span><span style="color:#C9D1D9;">),(</span><span style="color:#79C0FF;">4</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">&#39;RF&#39;</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">19</span><span style="color:#C9D1D9;">,</span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">/*Table structure for table `user_role` */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">DROP</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">TABLE</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">IF</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">EXISTS</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">`user_role`</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">CREATE</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">TABLE</span><span style="color:#C9D1D9;"> `</span><span style="color:#D2A8FF;">user_role</span><span style="color:#C9D1D9;">` (</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`user_id`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">11</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#A5D6FF;">`role_id`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">int</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">11</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">NULL</span></span>
<span class="line"><span style="color:#C9D1D9;">) ENGINE</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">InnoDB </span><span style="color:#FF7B72;">DEFAULT</span><span style="color:#C9D1D9;"> CHARSET</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">/*Data for the table `user_role` */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">insert  into</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">`user_role`</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">`user_id`</span><span style="color:#C9D1D9;">,</span><span style="color:#A5D6FF;">`role_id`</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">values</span><span style="color:#C9D1D9;"> (</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">),(</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">),(</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h3 id="_0-2-实体类" tabindex="-1">0.2 实体类 <a class="header-anchor" href="#_0-2-实体类" aria-hidden="true">#</a></h3><h4 id="_0-2-1-user-java" tabindex="-1">0.2.1 User.java <a class="header-anchor" href="#_0-2-1-user-java" aria-hidden="true">#</a></h4><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">User</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Integer</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">username;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Integer</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">age;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">address;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Override</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> String </span><span style="color:#D2A8FF;">toString</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;User{&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&quot;id=&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> id </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&quot;, username=&#39;&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> username </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;</span><span style="color:#79C0FF;">\&#39;</span><span style="color:#A5D6FF;">&#39;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&quot;, age=&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> age </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&quot;, address=&#39;&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> address </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;</span><span style="color:#79C0FF;">\&#39;</span><span style="color:#A5D6FF;">&#39;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&#39;}&#39;</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> Integer </span><span style="color:#D2A8FF;">getId</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> id;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">setId</span><span style="color:#C9D1D9;">(Integer </span><span style="color:#FFA657;">id</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.id </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> id;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> String </span><span style="color:#D2A8FF;">getUsername</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> username;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">setUsername</span><span style="color:#C9D1D9;">(String </span><span style="color:#FFA657;">username</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.username </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> username;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> Integer </span><span style="color:#D2A8FF;">getAge</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> age;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">setAge</span><span style="color:#C9D1D9;">(Integer </span><span style="color:#FFA657;">age</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.age </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> age;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> String </span><span style="color:#D2A8FF;">getAddress</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> address;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">setAddress</span><span style="color:#C9D1D9;">(String </span><span style="color:#FFA657;">address</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.address </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> address;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">User</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">User</span><span style="color:#C9D1D9;">(Integer </span><span style="color:#FFA657;">id</span><span style="color:#C9D1D9;">, String </span><span style="color:#FFA657;">username</span><span style="color:#C9D1D9;">, Integer </span><span style="color:#FFA657;">age</span><span style="color:#C9D1D9;">, String </span><span style="color:#FFA657;">address</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.id </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> id;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.username </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> username;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.age </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> age;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.address </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> address;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><h4 id="_0-2-2-order-java" tabindex="-1">0.2.2 Order.java <a class="header-anchor" href="#_0-2-2-order-java" aria-hidden="true">#</a></h4><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">Order</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Integer</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">id;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Date</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">createtime;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Integer</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">price;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">remark;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Integer</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">userId;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Override</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> String </span><span style="color:#D2A8FF;">toString</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;Order{&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&quot;id=&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> id </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&quot;, createtime=&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> createtime </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&quot;, price=&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> price </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&quot;, remark=&#39;&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> remark </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;</span><span style="color:#79C0FF;">\&#39;</span><span style="color:#A5D6FF;">&#39;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&quot;, userId=&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> userId </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&#39;}&#39;</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">   </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Order</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> Integer </span><span style="color:#D2A8FF;">getId</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> id;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">setId</span><span style="color:#C9D1D9;">(Integer </span><span style="color:#FFA657;">id</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.id </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> id;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> Date </span><span style="color:#D2A8FF;">getCreatetime</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> createtime;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">setCreatetime</span><span style="color:#C9D1D9;">(Date </span><span style="color:#FFA657;">createtime</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.createtime </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> createtime;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> Integer </span><span style="color:#D2A8FF;">getPrice</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> price;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">setPrice</span><span style="color:#C9D1D9;">(Integer </span><span style="color:#FFA657;">price</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.price </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> price;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> String </span><span style="color:#D2A8FF;">getRemark</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> remark;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">setRemark</span><span style="color:#C9D1D9;">(String </span><span style="color:#FFA657;">remark</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.remark </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> remark;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> Integer </span><span style="color:#D2A8FF;">getUserId</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> userId;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">setUserId</span><span style="color:#C9D1D9;">(Integer </span><span style="color:#FFA657;">userId</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.userId </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userId;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Order</span><span style="color:#C9D1D9;">(Integer </span><span style="color:#FFA657;">id</span><span style="color:#C9D1D9;">, Date </span><span style="color:#FFA657;">createtime</span><span style="color:#C9D1D9;">, Integer </span><span style="color:#FFA657;">price</span><span style="color:#C9D1D9;">, String </span><span style="color:#FFA657;">remark</span><span style="color:#C9D1D9;">, Integer </span><span style="color:#FFA657;">userId</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.id </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> id;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.createtime </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> createtime;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.price </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> price;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.remark </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> remark;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.userId </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userId;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><h4 id="_0-2-3-role-java" tabindex="-1">0.2.3 Role.java <a class="header-anchor" href="#_0-2-3-role-java" aria-hidden="true">#</a></h4><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">Role</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Integer</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">id;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">name;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">desc;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Override</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> String </span><span style="color:#D2A8FF;">toString</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;Role{&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&quot;id=&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> id </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&quot;, name=&#39;&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> name </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;</span><span style="color:#79C0FF;">\&#39;</span><span style="color:#A5D6FF;">&#39;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&quot;, desc=&#39;&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> desc </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;</span><span style="color:#79C0FF;">\&#39;</span><span style="color:#A5D6FF;">&#39;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#A5D6FF;">&#39;}&#39;</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Role</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> Integer </span><span style="color:#D2A8FF;">getId</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> id;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">setId</span><span style="color:#C9D1D9;">(Integer </span><span style="color:#FFA657;">id</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.id </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> id;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> String </span><span style="color:#D2A8FF;">getName</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> name;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">setName</span><span style="color:#C9D1D9;">(String </span><span style="color:#FFA657;">name</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.name </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> name;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> String </span><span style="color:#D2A8FF;">getDesc</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> desc;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">setDesc</span><span style="color:#C9D1D9;">(String </span><span style="color:#FFA657;">desc</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.desc </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> desc;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Role</span><span style="color:#C9D1D9;">(Integer </span><span style="color:#FFA657;">id</span><span style="color:#C9D1D9;">, String </span><span style="color:#FFA657;">name</span><span style="color:#C9D1D9;">, String </span><span style="color:#FFA657;">desc</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.id </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> id;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.name </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> name;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.desc </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> desc;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h2 id="_1-resultmap" tabindex="-1">1. ResultMap <a class="header-anchor" href="#_1-resultmap" aria-hidden="true">#</a></h2><h3 id="_1-1-基本使用" tabindex="-1">1.1 基本使用 <a class="header-anchor" href="#_1-1-基本使用" aria-hidden="true">#</a></h3><p>​ 我们可以使用resultMap标签自定义结果集和实体类属性的映射规则。</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">&lt;!--</span></span>
<span class="line"><span style="color:#8B949E;">	resultMap 用来自定义结果集和实体类的映射</span></span>
<span class="line"><span style="color:#8B949E;">		属性：</span></span>
<span class="line"><span style="color:#8B949E;">			id 相当于这个resultMap的唯一标识</span></span>
<span class="line"><span style="color:#8B949E;">			type 用来指定映射到哪个实体类</span></span>
<span class="line"><span style="color:#8B949E;">	id标签 用来指定主键列的映射规则</span></span>
<span class="line"><span style="color:#8B949E;">		属性：</span></span>
<span class="line"><span style="color:#8B949E;">			property 要映射的属性名</span></span>
<span class="line"><span style="color:#8B949E;">			column  对应的列名</span></span>
<span class="line"><span style="color:#8B949E;">	result标签 用来指定普通列的映射规则</span></span>
<span class="line"><span style="color:#8B949E;">		属性：</span></span>
<span class="line"><span style="color:#8B949E;">			property 要映射的属性名</span></span>
<span class="line"><span style="color:#8B949E;">			column 对应的列名</span></span>
<span class="line"><span style="color:#8B949E;">--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderMap&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.Order&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;createtime&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;createtime&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;price&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;price&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;remark&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;remark&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;user_id&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userId&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findAll&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultMap</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderMap&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    select id,createtime,price,remark,user_id from ORDERS</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="_1-2-自动映射" tabindex="-1">1.2 自动映射 <a class="header-anchor" href="#_1-2-自动映射" aria-hidden="true">#</a></h3><p>​ 我们定义resultMap时默认情况下自动映射是开启状态的。也就是如果结果集的列名和我们的属性名相同是会自动映射的我们只需要写特殊情况的映射关系即可。</p><p>例如：</p><p>下面这种写法和上面的写法会有相同的效果，因为其他属性的属性名和结果集的列名都是相通的会自动映射。</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderMap&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.Order&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">&lt;!--&lt;id column=&quot;id&quot; property=&quot;id&quot;&gt;&lt;/id&gt;--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">&lt;!--&lt;result column=&quot;createtime&quot; property=&quot;createtime&quot;&gt;&lt;/result&gt;--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">&lt;!--&lt;result column=&quot;price&quot; property=&quot;price&quot;&gt;&lt;/result&gt;--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">&lt;!--&lt;result column=&quot;remark&quot; property=&quot;remark&quot;&gt;&lt;/result&gt;--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;user_id&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userId&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#8B949E;">&lt;!--使用我们自定义的映射规则--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findAll&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultMap</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderMap&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    select id,createtime,price,remark,user_id from ORDERS</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>​ 如果有需要可以选择关闭自动映射,可以把resultMap的autoMapping属性设置为false。</p><p>例如：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderMap&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.Order&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">autoMapping</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;false&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;user_id&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userId&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findAll&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultMap</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderMap&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    select id,createtime,price,remark,user_id from ORDERS</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_1-3-继承映射关系" tabindex="-1">1.3 继承映射关系 <a class="header-anchor" href="#_1-3-继承映射关系" aria-hidden="true">#</a></h3><p>​ 我们可以使用resultMap的extends属性来指定一个resultMap，从而复用重复的映射关系配置。</p><p>例如：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;baseOrderMap&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.Order&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">autoMapping</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;false&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;createtime&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;createtime&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;price&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;price&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;remark&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;remark&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#8B949E;">&lt;!--继承父map里面的东西，提高代码的复用性，只需要改写需要改写的内容就可以了--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderMap&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.Order&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">autoMapping</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;false&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">extends</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;baseOrderMap&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;user_id&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userId&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_2-多表查询" tabindex="-1">2.多表查询 <a class="header-anchor" href="#_2-多表查询" aria-hidden="true">#</a></h2><p>​ 有时候我们需要查询多张表的数据才可以得到我们要的结果。</p><p>​ 我们可以直接写一个多表关联的SQL进行查询。也可以分步进行多次的查询来拿到我们需要的结果。</p><p>​ Mybatis就提供了对应的配置，可以让我们去更方便的进行相应的查询和对应的结果集处理。</p><h3 id="_2-1-多表关联查询" tabindex="-1">2.1 多表关联查询 <a class="header-anchor" href="#_2-1-多表关联查询" aria-hidden="true">#</a></h3><h4 id="_2-1-1-一对一关系" tabindex="-1">2.1.1 一对一关系 <a class="header-anchor" href="#_2-1-1-一对一关系" aria-hidden="true">#</a></h4><p>​ 两个实体之间是一对一的关系。（例如我们需要查询订单，要求还需要下单用户的数据。这里的订单相对于用户是一对一的关系。）</p><p>例如：</p><p>方法定义如下</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">//根据订单id查询订单，要求把下单用户的信息也查询出来</span></span>
<span class="line"><span style="color:#C9D1D9;">Order </span><span style="color:#D2A8FF;">findById</span><span style="color:#C9D1D9;">(Integer id);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>因为往Order中还能包含下单用户的数据，所以可以在Order中增加一个属性</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> User</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">user;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>SQL语句如下</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">select</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">o</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">,o.</span><span style="color:#A5D6FF;">`createtime`</span><span style="color:#C9D1D9;">,o.</span><span style="color:#A5D6FF;">`price`</span><span style="color:#C9D1D9;">,o.</span><span style="color:#A5D6FF;">`remark`</span><span style="color:#C9D1D9;">,o.</span><span style="color:#A5D6FF;">`user_id`</span><span style="color:#C9D1D9;">,u.</span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">uid</span><span style="color:#C9D1D9;">,u..</span><span style="color:#A5D6FF;">`username`</span><span style="color:#C9D1D9;">,u.</span><span style="color:#A5D6FF;">`age`</span><span style="color:#C9D1D9;">,u.</span><span style="color:#A5D6FF;">`address`</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">from</span></span>
<span class="line"><span style="color:#C9D1D9;">        orders o,user u</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">where</span></span>
<span class="line"><span style="color:#C9D1D9;">        o.</span><span style="color:#A5D6FF;">`user_id`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> u.</span><span style="color:#A5D6FF;">`id`</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">and</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">o</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">2</span></span>
<span class="line"><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">SELECT</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">o</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">,o.</span><span style="color:#A5D6FF;">`createtime`</span><span style="color:#C9D1D9;">,o.</span><span style="color:#A5D6FF;">`price`</span><span style="color:#C9D1D9;">,o.</span><span style="color:#A5D6FF;">`remark`</span><span style="color:#C9D1D9;">,o.</span><span style="color:#A5D6FF;">`user_id`</span><span style="color:#C9D1D9;">,u.</span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">uid</span><span style="color:#C9D1D9;">,u.</span><span style="color:#A5D6FF;">`username`</span><span style="color:#C9D1D9;">,u.</span><span style="color:#A5D6FF;">`age`</span><span style="color:#C9D1D9;">,u.</span><span style="color:#A5D6FF;">`address`</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">FROM</span></span>
<span class="line"><span style="color:#C9D1D9;">        orders o,USER u</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">WHERE</span></span>
<span class="line"><span style="color:#C9D1D9;">        o.</span><span style="color:#A5D6FF;">`user_id`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> u.</span><span style="color:#A5D6FF;">`id`</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">AND</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">o</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> #{id}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>结果集</p><p><img src="https://bed-1309358403.cos.ap-shanghai.myqcloud.com/img/2023/01/08/20230108213418.png" alt="image-20210224155400455"></p><p>我们可以使用如下两种方式封装结果集</p><h5 id="_2-1-1-1-使用resultmap对所有字段进行映射" tabindex="-1">2.1.1.1 使用ResultMap对所有字段进行映射 <a class="header-anchor" href="#_2-1-1-1-使用resultmap对所有字段进行映射" aria-hidden="true">#</a></h5><p>​ 可以使用ResultMap设置user对象的属性设置映射规则。</p><p>①resultMap定义，主要是对user对象的属性设置映射规则</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">&lt;!--父map--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;baseOrderMap&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.Order&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">autoMapping</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;false&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;createtime&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;createtime&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;price&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;price&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;remark&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;remark&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">&lt;!--继承父map里面的东西，提高代码的复用性，只需要改写需要改写的内容就可以了--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderMap&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.Order&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">autoMapping</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;false&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">extends</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;baseOrderMap&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;user_id&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userId&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderUserMap&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.Order&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">extends</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderMap&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;uid&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;user.id&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;user.username&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;user.age&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;address&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;user.address&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>②使用定义好的resultMap</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">&lt;!--根据订单id查询订单，要求把下单用户的信息也查询出来--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findById&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultMap</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderUserMap&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        SELECT</span></span>
<span class="line"><span style="color:#C9D1D9;">            o.`id`,o.`createtime`,o.`price`,o.`remark`,o.`user_id`,u.`id` uid,u.`username`,u.`age`,u.`address`</span></span>
<span class="line"><span style="color:#C9D1D9;">        FROM</span></span>
<span class="line"><span style="color:#C9D1D9;">            orders o,`user` u</span></span>
<span class="line"><span style="color:#C9D1D9;">        WHERE</span></span>
<span class="line"><span style="color:#C9D1D9;">            o.id = #{id} AND</span></span>
<span class="line"><span style="color:#C9D1D9;">            o.`user_id`=u.`id`</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="_2-1-1-2-使用resultmap中的association" tabindex="-1">2.1.1.2 使用ResultMap中的association <a class="header-anchor" href="#_2-1-1-2-使用resultmap中的association" aria-hidden="true">#</a></h5><p>​ 可以使用ResultMap中的字标签association来设置关联实体类的映射规则。</p><p>①定义resultMap</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">&lt;!--父map--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;baseOrderMap&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.Order&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">autoMapping</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;false&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;createtime&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;createtime&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;price&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;price&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;remark&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;remark&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">&lt;!--继承父map里面的东西，提高代码的复用性，只需要改写需要改写的内容就可以了--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderMap&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.Order&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">autoMapping</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;false&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">extends</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;baseOrderMap&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;user_id&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userId&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderUserMapUserAssociation&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.Order&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">extends</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderMap&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">association</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;user&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">javaType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;uid&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;address&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;address&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">association</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>②使用resultMap</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findById&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultMap</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;orderUserMapUserAssociation&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    SELECT</span></span>
<span class="line"><span style="color:#C9D1D9;">        o.id,o.`createtime`,o.`price`,o.`remark`,o.`user_id`,u.`id` uid,u.`username`,u.`age`,u.`address`</span></span>
<span class="line"><span style="color:#C9D1D9;">    FROM</span></span>
<span class="line"><span style="color:#C9D1D9;">        orders o,USER u</span></span>
<span class="line"><span style="color:#C9D1D9;">    WHERE</span></span>
<span class="line"><span style="color:#C9D1D9;">        o.`user_id` = u.`id`</span></span>
<span class="line"><span style="color:#C9D1D9;">        AND o.id = #{id}</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_2-1-2-一对多关系" tabindex="-1">2.1.2 一对多关系 <a class="header-anchor" href="#_2-1-2-一对多关系" aria-hidden="true">#</a></h4><p>​ 两个实体之间是一对多的关系。（例如我们需要查询用户，要求还需要该用户所具有的角色信息。这里的用户相对于角色是一对多的。）</p><p>例如：</p><p>方法定义如下</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">//根据id查询用户，并且要求把该用户所具有的角色信息也查询出来</span></span>
<span class="line"><span style="color:#C9D1D9;">User </span><span style="color:#D2A8FF;">findById</span><span style="color:#C9D1D9;">(Integer id);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>因为期望User中还能包含该用户所具有的角色信息，所以可以在User中增加一个属性</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">//该用户所具有的角色</span></span>
<span class="line"><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">Role</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">roles;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>SQL语句如下</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">SELECT</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> u.</span><span style="color:#A5D6FF;">`id`</span><span style="color:#C9D1D9;">,u.</span><span style="color:#A5D6FF;">`username`</span><span style="color:#C9D1D9;">,u.</span><span style="color:#A5D6FF;">`age`</span><span style="color:#C9D1D9;">,u.</span><span style="color:#A5D6FF;">`address`</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">r</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;"> rid,</span><span style="color:#79C0FF;">r</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">r</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">desc</span></span>
<span class="line"><span style="color:#FF7B72;">FROM</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> USER u,user_role ur,</span><span style="color:#FF7B72;">role</span><span style="color:#C9D1D9;"> r</span></span>
<span class="line"><span style="color:#FF7B72;">WHERE</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">u</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">id</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">ur</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">user_id</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">AND</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ur</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">role_id</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">r</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">id</span></span>
<span class="line"><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">AND</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">u</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">2</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>结果集</p><p><img src="https://raw.githubusercontent.com/DunXi/zdx/main/img/202203051856087.png" alt="image-4"></p><p>我们可以使用如下方式封装结果集。</p><h5 id="_2-1-2-1-使用resultmap中的collection" tabindex="-1">2.1.2.1 使用ResultMap中的collection <a class="header-anchor" href="#_2-1-2-1-使用resultmap中的collection" aria-hidden="true">#</a></h5><p>​ 可以使用ResultMap中的字标签association来设置关联实体类的映射规则。</p><p>①定义ResultMap</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">&lt;!--定义User基本属性映射规则--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userMap&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;address&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;address&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>②使用ResultMap</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userRoleMap&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">extends</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userMap&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">collection</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;roles&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ofType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.Role&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;rid&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;name&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;name&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;desc&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;desc&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">collection</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>最终封装完的效果如下：</p><p><img src="https://raw.githubusercontent.com/DunXi/zdx/main/img/202203051904520.png" alt="image-20220305190442960"></p><h3 id="_2-2-分步查询" tabindex="-1">2.2 分步查询 <a class="header-anchor" href="#_2-2-分步查询" aria-hidden="true">#</a></h3><p>​ 如果有需要多表查询的需求我们也可以选择用多次查询的方式来查询出我们想要的数据。Mybatis也提供了对应的配置。</p><p>​ 例如我们需要查询用户，要求还需要查询出该用户所具有的角色信息。我们可以选择先查询User表查询用户信息，然后再去查询关联角色的信息。</p><h4 id="_2-2-1-实现步骤" tabindex="-1">2.2.1 实现步骤 <a class="header-anchor" href="#_2-2-1-实现步骤" aria-hidden="true">#</a></h4><p>​ 具体步骤如下：</p><h5 id="_1定义查询方法" tabindex="-1">①定义查询方法 <a class="header-anchor" href="#_1定义查询方法" aria-hidden="true">#</a></h5><p>​ 因为我们需要分两步查询：1.查询User 2.根据用户的id查询Role 所以我们需要定义下面两个方法，并且把对应的标签也先写好。</p><p>1.查询User</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">//根据用户名查询用户、并且要求把该用户所具有的角色信息也查询出来</span></span>
<span class="line"><span style="color:#C9D1D9;">User </span><span style="color:#D2A8FF;">findByUsername</span><span style="color:#C9D1D9;">(String username);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">&lt;!--根据用户名查询用户--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findByUsername&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;"> select id,username,age,address from user where username = #{username}</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>2.根据user_id查询Role</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">interface</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">RoleDao</span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">//根据userId查询所具有的角色</span></span>
<span class="line"><span style="color:#C9D1D9;">    List&lt;</span><span style="color:#FF7B72;">Role</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">findRoleByUserId</span><span style="color:#C9D1D9;">(Integer </span><span style="color:#FFA657;">userId</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">&lt;!--根据userId查询所具有的角色--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findRoleByUserId&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.sangeng.pojo.Role&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        select </span></span>
<span class="line"><span style="color:#C9D1D9;">            r.id,r.name,r.desc</span></span>
<span class="line"><span style="color:#C9D1D9;">        from </span></span>
<span class="line"><span style="color:#C9D1D9;">            role r,user_role ur</span></span>
<span class="line"><span style="color:#C9D1D9;">        where </span></span>
<span class="line"><span style="color:#C9D1D9;">            ur.role_id = r.id</span></span>
<span class="line"><span style="color:#C9D1D9;">            and ur.user_id = #{userId}</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="_2配置分步查询" tabindex="-1">②配置分步查询 <a class="header-anchor" href="#_2配置分步查询" aria-hidden="true">#</a></h5><p>​ 我们期望的效果是调用findByUsername方法查询出来的结果中就包含角色的信息。所以我们可以设置findByUsername方法的ResultMap，指定分步查询</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">&lt;!--定义User基本属性映射规则--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userMap&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">id</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;username&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;age&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;address&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;address&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">result</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">&lt;!--</span></span>
<span class="line"><span style="color:#8B949E;">       select属性：指定用哪个查询来查询当前属性的数据 写法：包名.接口名.方法名</span></span>
<span class="line"><span style="color:#8B949E;">       column属性：设置当前结果集中哪列的数据作为select属性指定的查询方法需要参数</span></span>
<span class="line"><span style="color:#8B949E;">   --&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userRoleMapBySelect&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">extends</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userMap&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">&lt;!--roles的数据怎么查？--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">&lt;!--把当前结果集的那个数据当做参数传递过去--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">collection</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;roles&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">                    </span><span style="color:#79C0FF;">ofType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.Role&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">                    </span><span style="color:#79C0FF;">select</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.dao.RoleDao.findRoleByUserId&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">                    </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">                    &gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">collection</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>指定findByUsername使用我们刚刚创建的resultMap</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">&lt;!--根据用户名查询用户，并且要求把该用户所具有的角色信息也查询出来--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findByUsername&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultMap</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userRoleMapBySelect&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        select id,username,age,address from user where username = #{username}</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_2-2-2-设置按需加载" tabindex="-1">2.2.2 设置按需加载 <a class="header-anchor" href="#_2-2-2-设置按需加载" aria-hidden="true">#</a></h4><p>​ 我们可以设置按需加载，这样在我们代码中需要用到关联数据的时候才会去查询关联数据。</p><p>​ 有两种方式可以配置分别是全局配置和局部配置</p><ol><li>局部配置</li></ol><p>​ 设置fetchType属性为lazy</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;"> </span><span style="color:#8B949E;">&lt;!--</span></span>
<span class="line"><span style="color:#8B949E;">    select属性：指定用哪个查询来查询当前属性的数据 写法：包名.接口名.方法名</span></span>
<span class="line"><span style="color:#8B949E;">    column属性：设置当前结果集中哪列的数据作为select属性指定的查询方法需要参数</span></span>
<span class="line"><span style="color:#8B949E;">--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;"> </span><span style="color:#8B949E;">&lt;!-- fetchType=&quot;lazy&quot;设置懒加载 根据用户的需求来确定要不要查询第二步--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;"> &lt;</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userRoleMapBySelect&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.User&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">extends</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;userMap&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">     </span><span style="color:#8B949E;">&lt;!--roles的数据怎么查？--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">     </span><span style="color:#8B949E;">&lt;!--把当前结果集的那个数据当做参数传递过去--&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">     &lt;</span><span style="color:#7EE787;">collection</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">property</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;roles&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">                 </span><span style="color:#79C0FF;">ofType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.pojo.Role&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">                 </span><span style="color:#79C0FF;">select</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.dunxi.dao.RoleDao.findRoleByUserId&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">                 </span><span style="color:#79C0FF;">column</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;id&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">                 </span><span style="color:#79C0FF;">fetchType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;lazy&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">             &gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">     &lt;/</span><span style="color:#7EE787;">collection</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;"> &lt;/</span><span style="color:#7EE787;">resultMap</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ol start="2"><li>全局配置</li></ol><p>设置lazyLoadingEnabled为true</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">settings</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">       &lt;</span><span style="color:#7EE787;">setting</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;lazyLoadingEnabled&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;true&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">settings</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_3-分页查询-pagehelper" tabindex="-1">3.分页查询-PageHelper <a class="header-anchor" href="#_3-分页查询-pagehelper" aria-hidden="true">#</a></h2><p>​ 我们可以使用PageHelper非常方便的帮我们实现分页查询的需求。不需要自己在SQL中拼接SQL相关参数，并且能非常方便的获取总页数总条数等分页相关数据。</p><h3 id="_3-1-实现步骤" tabindex="-1">3.1 实现步骤 <a class="header-anchor" href="#_3-1-实现步骤" aria-hidden="true">#</a></h3><h4 id="_1定义方法查询方法以及生成对应标签" tabindex="-1">①定义方法查询方法以及生成对应标签 <a class="header-anchor" href="#_1定义方法查询方法以及生成对应标签" aria-hidden="true">#</a></h4><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;"> List</span><span style="color:#FF7B72;">&lt;</span><span style="color:#C9D1D9;">User</span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">findAll</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;findAll&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">resultType</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.sangeng.pojo.User&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        select id,username,age,address from user</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">select</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_2-引入依赖" tabindex="-1">② 引入依赖 <a class="header-anchor" href="#_2-引入依赖" aria-hidden="true">#</a></h4><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;com.github.pagehelper&lt;/</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;pagehelper&lt;/</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">&gt;4.0.0&lt;/</span><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_3-配置mybatis核心配置文件使用分页插件" tabindex="-1">③ 配置Mybatis核心配置文件使用分页插件 <a class="header-anchor" href="#_3-配置mybatis核心配置文件使用分页插件" aria-hidden="true">#</a></h4><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;"> &lt;</span><span style="color:#7EE787;">plugins</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">&lt;!-- 注意：分页助手的插件  配置在通用馆mapper之前 --&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">plugin</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">interceptor</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.github.pagehelper.PageHelper&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#8B949E;">&lt;!-- 指定方言 --&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">            &lt;</span><span style="color:#7EE787;">property</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;dialect&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;mysql&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;/</span><span style="color:#7EE787;">plugin</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">plugins</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_4-开始分页查询" tabindex="-1">④ 开始分页查询 <a class="header-anchor" href="#_4-开始分页查询" aria-hidden="true">#</a></h4><p>我们需要在使用查询费方法前设置分页参数即可</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#8B949E;">//设置分页参数</span></span>
<span class="line"><span style="color:#C9D1D9;">UserDao</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">userDao</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> session.</span><span style="color:#D2A8FF;">getMapper</span><span style="color:#C9D1D9;">(UserDao.class);</span></span>
<span class="line"><span style="color:#8B949E;">//设置分页查询参数</span></span>
<span class="line"><span style="color:#C9D1D9;">PageHelper.</span><span style="color:#D2A8FF;">startPage</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">,</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">users</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userDao.</span><span style="color:#D2A8FF;">findAll</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">System.out.</span><span style="color:#D2A8FF;">pringln</span><span style="color:#C9D1D9;">(users.</span><span style="color:#D2A8FF;">get</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">));</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果需要获取总页数总条数等分页相关数据，只需要创建一个PageInfo对象，把刚刚查询出的返回值作为构造参数传入。然后使用PageInfo对象获取即可。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">PageInfo</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">pageInfo</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> PageInfo&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt;(users);</span></span>
<span class="line"><span style="color:#C9D1D9;">System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;总条数：&quot;</span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;">pageInfo.</span><span style="color:#D2A8FF;">getTotal</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;总页数：&quot;</span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;">pageInfo.</span><span style="color:#D2A8FF;">getPages</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;当前页：&quot;</span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;">pageInfo.</span><span style="color:#D2A8FF;">getPageNum</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;每页显示长度：&quot;</span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;">pageInfo.</span><span style="color:#D2A8FF;">getPageSize</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-2-一对多多表查询分页问题" tabindex="-1">3.2 一对多多表查询分页问题 <a class="header-anchor" href="#_3-2-一对多多表查询分页问题" aria-hidden="true">#</a></h3><p>​ 我们在进行一对多的多表查询的时候，如果使用了PageHelper进行分页。会出现关联数据不全的情况。我们可以使用分步查询的方式来解决该问题。</p><h2 id="_4-mybatis缓存" tabindex="-1">4.Mybatis缓存 <a class="header-anchor" href="#_4-mybatis缓存" aria-hidden="true">#</a></h2><p>​ Mybatis的缓存其实就是把之前查到的数据存入内存(map) ,瑕疵如果还是查询相同的东西，就可以直接从缓存中取，从而提高效率。</p><p>​ Mybatis有一级缓存和二级缓存之分，一级缓存（默认开启）是sqlsession级别的缓存。二级缓存相当于mapper级别的缓存。</p><h3 id="_4-1-一级缓存" tabindex="-1">4.1 一级缓存 <a class="header-anchor" href="#_4-1-一级缓存" aria-hidden="true">#</a></h3><p>几种不会使用一级缓存的情况</p><ol><li>调用相同的方法但是传入的参数值不同</li><li>调用相同的方法参数也相同，但是使用的是另外一个sqlSession上的缓存</li><li>如果查询完后，对一个表进行了增，删改操作，都会情况这sqlSession上的缓存</li><li>如果手动调用SqlSession的clearCache方法清除缓存了，后面也是用不了缓存</li></ol><p><img src="https://raw.githubusercontent.com/DunXi/zdx/main/img/202203081711936.png" alt="image-20220308171152320"></p><h3 id="_4-2-二级缓存" tabindex="-1">4.2 二级缓存 <a class="header-anchor" href="#_4-2-二级缓存" aria-hidden="true">#</a></h3><p>​ 注意：只在sqlsession调用了close或者commit后的数据才会进入二级缓存。</p><h4 id="_4-2-1-开启二级缓存" tabindex="-1">4.2.1 开启二级缓存 <a class="header-anchor" href="#_4-2-1-开启二级缓存" aria-hidden="true">#</a></h4><p>①全局开启</p><p>在Mybatis核心配置文件中配置</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">settings</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">setting</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;cacheEnabled&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;true&quot;</span><span style="color:#C9D1D9;">/&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">settings</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>②局部开启</p><p>在要开启二级缓存的mapper映射文件中设置cache标签</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;?</span><span style="color:#7EE787;">xml</span><span style="color:#79C0FF;"> version</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;1.0&quot;</span><span style="color:#79C0FF;"> encoding</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;UTF-8&quot;</span><span style="color:#C9D1D9;"> ?&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;!</span><span style="color:#FF7B72;">DOCTYPE</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">mapper</span><span style="color:#C9D1D9;"> PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot; &gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">namespace</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;com.sangeng.dao.RoleDao&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">cache</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">cache</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">mapper</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_4-2-2-使用建议" tabindex="-1">4.2.2 使用建议 <a class="header-anchor" href="#_4-2-2-使用建议" aria-hidden="true">#</a></h4><p>​ 二级缓存在实际开发中基本不会使用。</p></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-22d94e81 data-v-d057f2bd><div class="edit-info" data-v-d057f2bd><!----><div class="last-updated" data-v-d057f2bd><p class="VPLastUpdated" data-v-d057f2bd data-v-8698a6d5>Last updated: <time datetime="2023-01-08T14:38:08.000Z" data-v-8698a6d5></time></p></div></div><div class="prev-next" data-v-d057f2bd><div class="pager" data-v-d057f2bd><a class="pager-link prev" href="/lindocs/java/spring/SSM%E6%95%B4%E5%90%88.html" data-v-d057f2bd><span class="desc" data-v-d057f2bd>Previous page</span><span class="title" data-v-d057f2bd>SSM整合</span></a></div><div class="has-prev pager" data-v-d057f2bd><a class="pager-link next" href="/lindocs/java/spring/MybatisPlus.html" data-v-d057f2bd><span class="desc" data-v-d057f2bd>Next page</span><span class="title" data-v-d057f2bd>MyBatis Plus</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-2855b47a data-v-d7033f51><div class="container" data-v-d7033f51><p class="message" data-v-d7033f51>Released under the MIT License.</p><p class="copyright" data-v-d7033f51>Copyright © 2021-present Lin ZiLi</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"frontend_vue_quick-start.md\":\"173adba0\",\"frontend_vue_api_general.md\":\"7a9135ba\",\"index.md\":\"961740bf\",\"java_docker.md\":\"95c64395\",\"java_spring_springmvc.md\":\"2882db09\",\"java_spring_mybatis.md\":\"b8883719\",\"database_mysql_navicat.md\":\"47d2fd64\",\"java_gradle.md\":\"ce1f5f95\",\"java_spring_ssm整合.md\":\"68e45f34\",\"java_spring_springboot.md\":\"093c0688\",\"java_spring_mybatisplus.md\":\"ea63b981\",\"database_mysql_mysql-base.md\":\"aa208aec\",\"frontend_vue_code-standard.md\":\"c24d01fd\",\"java_spring_spring.md\":\"7b149640\",\"java_java-base.md\":\"ae4154e3\",\"spring_springboot_springboot.md\":\"66dd4f01\",\"spring_springcloud_nacos.md\":\"de3ccd34\",\"spring_springcloud_openfeign.md\":\"7454cf82\",\"spring_springcloud_sentinel.md\":\"8836c7d4\",\"spring_springcloud_springcloudgateway.md\":\"cd7a02f8\",\"java_spring_springsecurityjwt.md\":\"c78c4995\",\"frontend_js_index.md\":\"56b48721\"}")</script>
    <script type="module" async src="/lindocs/assets/app.66df897c.js"></script>
    
  </body>
</html>